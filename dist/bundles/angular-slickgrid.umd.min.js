!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs/Observable"),require("rxjs/add/operator/first"),require("rxjs/add/operator/take"),require("rxjs/add/operator/toPromise"),require("moment-mini"),require("@angular/core"),require("@ngx-translate/core"),require("text-encoding-utf-8"),require("rxjs/Subject"),require("slickgrid/lib/jquery-ui-1.11.3"),require("slickgrid/lib/jquery.event.drag-2.3.0"),require("slickgrid/slick.core"),require("slickgrid/slick.dataview"),require("slickgrid/slick.grid"),require("slickgrid/controls/slick.columnpicker"),require("slickgrid/controls/slick.gridmenu"),require("slickgrid/controls/slick.pager"),require("slickgrid/plugins/slick.autotooltips"),require("slickgrid/plugins/slick.cellcopymanager"),require("slickgrid/plugins/slick.cellexternalcopymanager"),require("slickgrid/plugins/slick.cellrangedecorator"),require("slickgrid/plugins/slick.cellrangeselector"),require("slickgrid/plugins/slick.cellselectionmodel"),require("slickgrid/plugins/slick.checkboxselectcolumn"),require("slickgrid/plugins/slick.headerbuttons"),require("slickgrid/plugins/slick.headermenu"),require("slickgrid/plugins/slick.rowmovemanager"),require("slickgrid/plugins/slick.rowselectionmodel"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","rxjs/Observable","rxjs/add/operator/first","rxjs/add/operator/take","rxjs/add/operator/toPromise","moment-mini","@angular/core","@ngx-translate/core","text-encoding-utf-8","rxjs/Subject","slickgrid/lib/jquery-ui-1.11.3","slickgrid/lib/jquery.event.drag-2.3.0","slickgrid/slick.core","slickgrid/slick.dataview","slickgrid/slick.grid","slickgrid/controls/slick.columnpicker","slickgrid/controls/slick.gridmenu","slickgrid/controls/slick.pager","slickgrid/plugins/slick.autotooltips","slickgrid/plugins/slick.cellcopymanager","slickgrid/plugins/slick.cellexternalcopymanager","slickgrid/plugins/slick.cellrangedecorator","slickgrid/plugins/slick.cellrangeselector","slickgrid/plugins/slick.cellselectionmodel","slickgrid/plugins/slick.checkboxselectcolumn","slickgrid/plugins/slick.headerbuttons","slickgrid/plugins/slick.headermenu","slickgrid/plugins/slick.rowmovemanager","slickgrid/plugins/slick.rowselectionmodel","@angular/common"],t):t(e["angular-slickgrid"]={},e.Rx,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.moment,e.ng.core,e["ngx-translate-core"],e.textEncodingUtf8,e.Rx,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,e.ng.common)}(this,function(e,t,i,r,n,o,s,a,l,u,c,d,p,h,f,g,m,y,v,b,S,C,w,T,k,O,_,P,E,I){"use strict";function F(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})}function A(e,t){function i(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var r,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function D(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function x(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(i=o["return"])&&i.call(o)}finally{if(n)throw n.error}}return s}function M(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x(arguments[t]));return e}function V(e){for(var t="",i=0;i<e;i++)t+=" ";return t}function R(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})}function N(e,i){void 0===i&&(i="");var r=e;if(e instanceof Promise)return e;if(e instanceof t.Observable&&((r=e.first().toPromise())instanceof Promise||(r=e.take(1).toPromise()),!(r instanceof Promise)))throw new Error("Something went wrong, Angular-Slickgrid "+i+" is not able to convert the Observable into a Promise.\n        If you are using Angular HttpClient, you could try converting your http call to a Promise with \".toPromise()\"\n        for example::  this.http.post('graphql', { query: graphqlQuery }).toPromise()\n        ");return r}function B(e){var t;switch(e){case W.dateTime:case W.dateTimeIso:t="YYYY-MM-DD HH:mm:ss";break;case W.dateTimeIsoAmPm:t="YYYY-MM-DD hh:mm:ss a";break;case W.dateTimeIsoAM_PM:t="YYYY-MM-DD hh:mm:ss A";break;case W.dateUs:t="MM/DD/YYYY";break;case W.dateUsShort:t="M/D/YY";break;case W.dateTimeUs:t="MM/DD/YYYY HH:mm:ss";break;case W.dateTimeUsAmPm:t="MM/DD/YYYY hh:mm:ss a";break;case W.dateTimeUsAM_PM:t="MM/DD/YYYY hh:mm:ss A";break;case W.dateTimeUsShort:t="M/D/YY H:m:s";break;case W.dateTimeUsShortAmPm:t="M/D/YY h:m:s a";break;case W.dateUtc:t="YYYY-MM-DDTHH:mm:ss.SSSZ";break;case W.date:case W.dateIso:default:t="YYYY-MM-DD"}return t}function G(e){var t;switch(e){case W.dateTime:case W.dateTimeIso:t="Y-m-d H:i:S";break;case W.dateTimeIsoAmPm:case W.dateTimeIsoAM_PM:t="Y-m-d h:i:S K";break;case W.dateUs:t="m/d/Y";break;case W.dateUsShort:t="M/D/YY";break;case W.dateTimeUs:t="m/d/Y H:i:S";break;case W.dateTimeUsAmPm:t="m/d/Y h:i:S K";break;case W.dateTimeUsAM_PM:t="M/D/YY h:i:s K";break;case W.dateTimeUsShort:t="M/D/YY H:i:s";break;case W.dateTimeUsShortAmPm:t="M/D/YY h:i:s K";break;case W.dateUtc:t="Z";break;case W.date:case W.dateIso:default:t="Y-m-d"}return t}function U(e){var t;switch(e){case"<":t=te.lessThan;break;case"<=":t=te.lessThanOrEqual;break;case">":t=te.greaterThan;break;case">=":t=te.greaterThanOrEqual;break;case"<>":case"!=":case"neq":case"NEQ":t=te.notEqual;break;case"*":case".*":case"startsWith":t=te.startsWith;break;case"*.":case"endsWith":t=te.endsWith;break;case"=":case"==":case"eq":case"EQ":t=te.equal;break;case"in":case"IN":t=te["in"];break;case"notIn":case"NIN":case"NOT_IN":t=te.notIn;break;default:t=te.contains}return t}function L(e){var t;switch(e){case W.string:case W.unknown:t=te.contains;break;case W["float"]:case W.number:case W.date:case W.dateIso:case W.date:case W.dateUtc:case W.dateTime:case W.dateTimeIso:case W.dateTimeIsoAmPm:case W.dateTimeIsoAM_PM:case W.dateUs:case W.dateUsShort:case W.dateTimeUs:case W.dateTimeUsAmPm:case W.dateTimeUsAM_PM:case W.dateTimeUsShort:case W.dateTimeUsShortAmPm:case W.dateTimeUsShortAM_PM:default:t=te.equal}return t}function H(e){var t;switch(e){case X.multipleSelect:t=te["in"];break;case X.singleSelect:t=te.equal;break;default:t=te.contains}return t}function z(e,t){var i=null;if(/^[0-9\-\/]*$/.test(e)){var r=decodeURIComponent(e),n=re(new Date(r));n.isValid()&&4===n.year().toString().length&&(i=t?n.utc().format():n.format())}return i}function j(e){return e.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_\/])/g,function(e,t){return/[\s+\-_\/]/.test(e)?"":0===t?e.toLowerCase():e.toUpperCase()})}function q(e){return/(true|1)/i.test(e+"")}var Y={camelCase:0,pascalCase:1,snakeCase:2};Y[Y.camelCase]="camelCase",Y[Y.pascalCase]="pascalCase",Y[Y.snakeCase]="snakeCase";var Q={colon:":",comma:",",equalSign:"=",pipe:"|",semicolon:";",space:" ",tab:"\t",doubleColon:"::",doublePipe:"||",doubleSemicolon:";;"},W={unknown:0,string:1,"boolean":2,integer:3,"float":4,number:5,date:6,dateIso:7,dateUtc:8,dateTime:9,dateTimeIso:10,dateTimeIsoAmPm:11,dateTimeIsoAM_PM:12,dateUs:13,dateUsShort:14,dateTimeUs:15,dateTimeUsAmPm:16,dateTimeUsAM_PM:17,dateTimeUsShort:18,dateTimeUsShortAmPm:19,dateTimeUsShortAM_PM:20};W[W.unknown]="unknown",W[W.string]="string",W[W["boolean"]]="boolean",W[W.integer]="integer",W[W["float"]]="float",W[W.number]="number",W[W.date]="date",W[W.dateIso]="dateIso",W[W.dateUtc]="dateUtc",W[W.dateTime]="dateTime",W[W.dateTimeIso]="dateTimeIso",W[W.dateTimeIsoAmPm]="dateTimeIsoAmPm",W[W.dateTimeIsoAM_PM]="dateTimeIsoAM_PM",W[W.dateUs]="dateUs",W[W.dateUsShort]="dateUsShort",W[W.dateTimeUs]="dateTimeUs",W[W.dateTimeUsAmPm]="dateTimeUsAmPm",W[W.dateTimeUsAM_PM]="dateTimeUsAM_PM",W[W.dateTimeUsShort]="dateTimeUsShort",W[W.dateTimeUsShortAmPm]="dateTimeUsShortAmPm",W[W.dateTimeUsShortAM_PM]="dateTimeUsShortAM_PM";var K={csv:"csv",doc:"doc",docx:"docx",pdf:"pdf",txt:"txt",xls:"xls",xlsx:"xlsx"},X={input:0,select:1,multipleSelect:2,singleSelect:3,custom:4,inputNoPlaceholder:5};X[X.input]="input",X[X.select]="select",X[X.multipleSelect]="multipleSelect",X[X.singleSelect]="singleSelect",X[X.custom]="custom",X[X.inputNoPlaceholder]="inputNoPlaceholder";var Z={input:0,select:1,multipleSelect:2,singleSelect:3,custom:4,inputNoPlaceholder:5,textarea:6};Z[Z.input]="input",Z[Z.select]="select",Z[Z.multipleSelect]="multipleSelect",Z[Z.singleSelect]="singleSelect",Z[Z.custom]="custom",Z[Z.inputNoPlaceholder]="inputNoPlaceholder",Z[Z.textarea]="textarea";var J={filter:"filter",pagination:"pagination",sorter:"sorter"},ee={BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,TAB:9,UP:38};ee[ee.BACKSPACE]="BACKSPACE",ee[ee.DELETE]="DELETE",ee[ee.DOWN]="DOWN",ee[ee.END]="END",ee[ee.ENTER]="ENTER",ee[ee.ESCAPE]="ESCAPE",ee[ee.HOME]="HOME",ee[ee.INSERT]="INSERT",ee[ee.LEFT]="LEFT",ee[ee.PAGE_DOWN]="PAGE_DOWN",ee[ee.PAGE_UP]="PAGE_UP",ee[ee.RIGHT]="RIGHT",ee[ee.TAB]="TAB",ee[ee.UP]="UP";var te={contains:"Contains",lessThan:"LT",lessThanOrEqual:"LE",greaterThan:"GT",greaterThanOrEqual:"GE",notEqual:"NE",equal:"EQ",endsWith:"EndsWith",startsWith:"StartsWith","in":"IN",notIn:"NIN"},ie={asc:"asc",ASC:"ASC",desc:"desc",DESC:"DESC"},re=o,ne=function(){function e(e){this.translate=e,this._lineCarriageReturn="\n",this._existingSlickAggregators=[],this._hasGroupedItems=!1,this.defaultExportOptions={delimiter:Q.comma,filename:"export",format:K.csv,useUtf8WithBom:!0}}return e.prototype.init=function(e,t,i){this._grid=e,this._gridOptions=t,this._dataView=i},e.prototype.exportToFile=function(e){this._exportOptions=$.extend(!0,{},this.defaultExportOptions,e);var t=this.getDataOutput();this.startDownloadFile({filename:this._exportOptions.filename+"."+this._exportOptions.format,csvContent:t,format:this._exportOptions.format,useUtf8WithBom:this._exportOptions.useUtf8WithBom})},e.prototype.getDataOutput=function(){var e=this,t=this._grid.getColumns()||[],i=this._exportOptions.delimiter||"",r=this._exportOptions.format||"";this._existingSlickAggregators=this.getAllSlickGridAggregators()||[],this._exportQuoteWrapper=r===K.csv?'"':"";var n="";if(this._groupedHeaders=this.getGroupedColumnTitles(t)||[],this._groupedHeaders&&Array.isArray(this._groupedHeaders)&&(this._hasGroupedItems=this._groupedHeaders.length>0,n+=this._groupedHeaders.map(function(t){return e.translate.instant("GROUP_BY")+" ["+t.title+"]"}).join(i)),this._columnHeaders=this.getColumnHeaders(t)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)){n+=this._columnHeaders.map(function(t){return e._exportQuoteWrapper+t.title+e._exportQuoteWrapper}).join(i)+this._lineCarriageReturn}return n+=this.getAllGridRowData(t,this._lineCarriageReturn)},e.prototype.getAllGridRowData=function(e,t){for(var i="",r=this._dataView.getLength(),n=0;n<r;n++){var o=this._dataView.getItem(n);null!=o&&(null!=o.id?i+=this.readRegularRowData(e,n,o):this._hasGroupedItems&&o.__groupTotals===undefined?i+=this.readGroupedTitleRow(o):o.__groupTotals&&(i+=this.readGroupedTotalRow(o)),i+=t)}return i},e.prototype.getAllSlickGridAggregators=function(){var e=[];for(var t in Slick.Data.Aggregators)Slick.Data.Aggregators.hasOwnProperty(t)&&e.push(t.toLowerCase());return e},e.prototype.getColumnHeaders=function(e){var t=this;if(!e||!Array.isArray(e)||0===e.length)return null;var i=[];return e.forEach(function(e){var r=e.headerKey?t.translate.instant(e.headerKey):e.name,n=e.excludeFromExport||!1;(e.width===undefined||e.width>0)&&!n&&i.push({key:e.field||e.id,title:r})}),i},e.prototype.readRegularRowData=function(e,t,i){for(var r=0,n="",o=this._exportOptions.delimiter,s=this._exportOptions.format,a=this._exportQuoteWrapper||"",l=0,u=e.length;l<u;l++){var c=e[l],d=c.field||c.id||"";if(!c.excludeFromExport){this._hasGroupedItems&&0===r&&(n+='""'+o);var p=c.exportWithFormatter!==undefined?c.exportWithFormatter:this._gridOptions.exportWithFormatter,h=c.exportCustomFormatter!==undefined?c.exportCustomFormatter:undefined,f="";f=h?h(t,l,i[d],c,i,this._grid):p&&c.formatter?c.formatter(t,l,i[d],c,i,this._grid):null===i[d]||i[d]===undefined?"":i[d],s===K.csv&&(f=f.toString().replace(/"/gi,'""'));n+=(c&&c.exportCsvForceToKeepAsString?"=":"")+a+f+a+o,r++}}return n},e.prototype.readGroupedTitleRow=function(e){var t=e.value,i=this._exportQuoteWrapper||"",r=this._exportOptions.delimiter,n=this._exportOptions.format;return t=V(5*e.level)+t,n===K.csv&&(t=t.toString().replace(/"/gi,'""')),i+" "+t+i+r},e.prototype.readGroupedTotalRow=function(e){for(var t=this._exportOptions.delimiter,i=this._exportOptions.format,r=this._exportQuoteWrapper||"",n=this._existingSlickAggregators||[],o=this._grid.getColumns().length,s=r+".."+r+t,a=0;a<o;a++){for(var l=this._grid.getColumns()[a].id,u="",c=0;c<n.length;c++)if(e[n[c]]!==undefined&&l in e[n[c]]){var d=n[c],p=e[n[c]][l];u="avg"===d.toLowerCase()?d+": "+Math.round(p):"min"===d.toLowerCase()||"max"===d.toLowerCase()||"sum"===d.toLowerCase()?d+": "+Math.round(1e6*parseFloat(p))/1e6:p}i===K.csv&&((u=u.toString().replace(/"/gi,'""')).match(/^\s*\d+E\d+\s*$/i)?"=":""),s+=r+u+r+t}return s},e.prototype.getGroupedColumnTitles=function(e){var t=this;if(!e||!Array.isArray(e)||0===e.length)return null;var i="",r=[],n=!1;return $.isEmptyObject(this._groupingDefinition)?n=!1:(n=!0,i=$("#"+this._groupingDefinition.dropdownOptionsIds[0]).val()),e.forEach(function(e){if(i.indexOf(".")>=0&&(i=i.split(".")[0]),n&&e.id===i){var o=e.headerKey?t.translate.instant(e.headerKey):e.name;r.push({key:e.field||e.id,title:o})}}),r},e.prototype.startDownloadFile=function(e){if("Microsoft Internet Explorer"===navigator.appName)throw new Error("Microsoft Internet Explorer 6 to 10 do not support javascript export to CSV. Please upgrade your browser.");var t,i=e.format===K.csv?"text/csv":"text/plain",r=R(e.csvContent);t=e.format===K.csv?new l.TextEncoder("utf-8").encode(r):r;var n=new Blob([e.useUtf8WithBom?"\ufeff":"",t],{type:i+";charset=utf-8;"});if("function"==typeof navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(n,e.filename);else{var o=document.createElement("a"),s=URL.createObjectURL(n);o.textContent="download",o.href=s,o.setAttribute("download",e.filename),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}},e}();ne.decorators=[{type:s.Injectable}],ne.ctorParameters=function(){return[{type:a.TranslateService}]};var oe=function(e){return q(e.cellValue)===q(e.searchTerm)},se=function(e,t,i){switch(e){case"<":case"LT":return t<i;case"<=":case"LE":return t<=i;case">":case"GT":return t>i;case">=":case"GE":return t>=i;case"!=":case"<>":case"NE":return t!==i;case"=":case"==":case"EQ":return t===i;case"IN":return!(!i||!i.includes)&&i.includes(t)}return!0},ae=o,le=function(e){var t=B(e.filterSearchType||W.dateIso);if(!ae(e.cellValue,ae.ISO_8601).isValid()||!ae(e.searchTerm,t,!0).isValid())return!0;var i=ae(e.cellValue),r=ae(e.searchTerm);return se(e.operator||"==",parseInt(i.format("X"),10),parseInt(r.format("X"),10))},ue=o,ce=B(W.dateIso),de=function(e){if(!ue(e.cellValue,ce,!0).isValid()||!ue(e.searchTerm,ce,!0).isValid())return!0;var t=ue(e.cellValue,ce,!0),i=ue(e.searchTerm,ce,!0);return se(e.operator||"==",parseInt(t.format("X"),10),parseInt(i.format("X"),10))},pe=o,he=B(W.dateUs),fe=function(e){if(!pe(e.cellValue,he,!0).isValid()||!pe(e.searchTerm,he,!0).isValid())return!0;var t=pe(e.cellValue,he,!0),i=pe(e.searchTerm,he,!0);return se(e.operator||"==",parseInt(t.format("X"),10),parseInt(i.format("X"),10))},ge=o,me=B(W.dateUsShort),ye=function(e){if(!ge(e.cellValue,me,!0).isValid()||!ge(e.searchTerm,me,!0).isValid())return!0;var t=ge(e.cellValue,me,!0),i=ge(e.searchTerm,me,!0);return se(e.operator||"==",parseInt(t.format("X"),10),parseInt(i.format("X"),10))},ve=o,be=function(e){if(!e.filterSearchType)throw new Error("Date UTC filter is a special case and requires a filterSearchType to be provided in the column option, for example: { filterable: true, type: FieldType.dateUtc, filterSearchType: FieldType.dateIso }");var t=B(e.filterSearchType);if(!ve(e.cellValue,ve.ISO_8601).isValid()||!ve(e.searchTerm,t,!0).isValid())return!0;var i=ve(e.cellValue,ve.ISO_8601,!0),r=ve(e.searchTerm,t,!0);return se(e.operator||"==",parseInt(i.format("X"),10),parseInt(r.format("X"),10))},Se=function(e){var t=e.cellValue+"";return se(e.operator||"IN",t,e.searchTerms||[])},Ce=function(e){var t=parseFloat(e.cellValue),i="string"==typeof e.searchTerm?parseFloat(e.searchTerm):e.searchTerm;return se(e.operator||"==",t,i)},we=function(e){e.cellValue=e.cellValue===undefined||null===e.cellValue?"":e.cellValue.toString();var t=e.cellValue.toLowerCase(),i="string"==typeof e.searchTerm?e.searchTerm.toLowerCase():e.searchTerm;return"*"===e.operator?t.endsWith(i):""===e.operator&&"*"===e.cellValueLastChar?t.startsWith(i):""===e.operator?t.includes(i):se(e.operator||"==",t,i)},Te=function(e){if(e&&e.operator&&"IN"===e.operator.toUpperCase())return Se(e);switch(e.fieldType){case W["boolean"]:return oe(e);case W.date:return le(e);case W.dateUtc:return be(e);case W.dateIso:return de(e);case W.dateUs:case W.dateTimeUs:return fe(e);case W.dateUsShort:case W.dateTimeUsShort:return ye(e);case W.number:return Ce(e);case W.string:default:return we(e)}},ke={executeMappedCondition:Te,booleanFilter:oe,collectionSearchFilter:Se,dateFilter:le,dateIsoFilter:de,dateUtcFilter:be,dateUsFilter:fe,dateUsShortFilter:ye,numberFilter:Ce,stringFilter:we,testFilter:se},Oe=function(){function e(){}return e.prototype.init=function(e){var t=this;this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerm=e.searchTerm;var i=this.buildTemplateHtmlString();this.$filterElm=this.createDomElement(i),this.$filterElm.keyup(function(e){e&&e.target&&e.target.value?t.$filterElm.addClass("filled"):t.$filterElm.removeClass("filled"),t.callback(e,{columnDef:t.columnDef})})},e.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&(this.$filterElm.val(""),e&&this.$filterElm.trigger("keyup"))},e.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("keyup").remove()},e.prototype.setValues=function(e){e&&this.$filterElm.val(e)},e.prototype.buildTemplateHtmlString=function(){return'<input type="text" class="form-control search-filter" style="font-family: Segoe UI Symbol;" placeholder="&#128269;">'},e.prototype.createDomElement=function(e){var t=this.grid.getHeaderRowColumn(this.columnDef.id);$(t).empty();var i=$(e),r="boolean"==typeof this.searchTerm?""+this.searchTerm:this.searchTerm;return i.val(r),i.attr("id","filter-"+this.columnDef.id),i.data("columnId",this.columnDef.id),this.searchTerm&&i.addClass("filled"),i&&"function"==typeof i.appendTo&&i.appendTo(t),i},e}(),_e=function(){function e(){}return e.prototype.init=function(e){var t=this;this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerm=e.searchTerm;var i=this.buildTemplateHtmlString();this.$filterElm=this.createDomElement(i),this.$filterElm.keyup(function(e){e&&e.target&&e.target.value?t.$filterElm.addClass("filled"):t.$filterElm.removeClass("filled"),t.callback(e,{columnDef:t.columnDef})})},e.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&(this.$filterElm.val(""),e&&this.$filterElm.trigger("keyup"))},e.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("keyup").remove()},e.prototype.setValues=function(e){e&&this.$filterElm.val(e)},e.prototype.buildTemplateHtmlString=function(){return'<input type="text" class="form-control search-filter">'},e.prototype.createDomElement=function(e){var t=this.grid.getHeaderRowColumn(this.columnDef.id);$(t).empty();var i=$(e),r="boolean"==typeof this.searchTerm?""+this.searchTerm:this.searchTerm;return i.val(r),i.attr("id","filter-"+this.columnDef.id),i.data("columnId",this.columnDef.id),this.searchTerm&&i.addClass("filled"),i&&"function"==typeof i.appendTo&&i.appendTo(t),i},e}(),Pe=function(){function e(e){var t=this;this.translate=e,this.isFilled=!1,this.defaultOptions={container:"body",filter:!1,maxHeight:200,okButton:!0,addTitle:!0,countSelected:this.translate.instant("X_OF_Y_SELECTED"),allSelected:this.translate.instant("ALL_SELECTED"),selectAllText:this.translate.instant("SELECT_ALL"),selectAllDelimiter:["",""],onClose:function(){var e=t.$filterElm.multipleSelect("getSelects");Array.isArray(e)&&e.length>0?(t.isFilled=!0,t.$filterElm.addClass("filled").siblings("div .search-filter").addClass("filled")):(t.isFilled=!1,t.$filterElm.removeClass("filled").siblings("div .search-filter").removeClass("filled")),t.callback(undefined,{columnDef:t.columnDef,operator:"IN",searchTerms:e})}}}return e.prototype.init=function(e){this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=e.searchTerms||[];var t=this.buildTemplateHtmlString();this.createDomElement(t)},e.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&this.$filterElm.multipleSelect&&(this.$filterElm.multipleSelect("setSelects",[]),e&&(this.$filterElm.removeClass("filled"),this.callback(undefined,{columnDef:this.columnDef,operator:"IN",searchTerms:[]})))},e.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off().remove()},e.prototype.setValues=function(e){e&&this.$filterElm.multipleSelect("setSelects",e)},e.prototype.buildTemplateHtmlString=function(){var e=this;if(!this.columnDef||!this.columnDef.filter||!this.columnDef.filter.collection)throw new Error("[Angular-SlickGrid] You need to pass a \"collection\" for the MultipleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: type: FilterType.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");var t=this.columnDef.filter.collection||[],i=this.columnDef.filter.customStructure?this.columnDef.filter.customStructure.label:"label",r=this.columnDef.filter.customStructure?this.columnDef.filter.customStructure.value:"value",n="";return t.forEach(function(t){if(!t||t[i]===undefined&&t.labelKey===undefined)throw new Error("A collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: type: FilterType.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");var o=t.labelKey||t[i],s=e.findValueInSearchTerms(t[r])>=0?"selected":"",a=(t.labelKey||e.columnDef.filter.enableTranslateLabel)&&e.translate&&"function"==typeof e.translate.instant?e.translate.instant(o||" "):o;n+='<option value="'+t[r]+'" '+s+">"+a+"</option>",s&&(e.isFilled=!0)}),'<select class="ms-filter search-filter" multiple="multiple">'+n+"</select>"},e.prototype.createDomElement=function(e){var t=this.grid.getHeaderRowColumn(this.columnDef.id);if($(t).empty(),this.$filterElm=$(e),"function"!=typeof this.$filterElm.multipleSelect)throw new Error('multiple-select.js was not found, make sure to modify your "angular-cli.json" file and include "../node_modules/angular-slickgrid/lib/multiple-select/multiple-select.js" and it\'s css or SASS file');this.$filterElm.attr("id","filter-"+this.columnDef.id),this.$filterElm.data("columnId",this.columnDef.id),this.isFilled&&this.$filterElm.addClass("filled"),this.$filterElm&&"function"==typeof this.$filterElm.appendTo&&this.$filterElm.appendTo(t);var i=Object.assign({},this.defaultOptions,this.columnDef.filter.filterOptions);this.$filterElm=this.$filterElm.multipleSelect(i)},e.prototype.findValueInSearchTerms=function(e){if(this.searchTerms&&Array.isArray(this.searchTerms))for(var t=0;t<this.searchTerms.length;t++)if(this.searchTerms[t]&&this.searchTerms[t]===e)return t;return-1},e}();Pe.decorators=[{type:s.Injectable}],Pe.ctorParameters=function(){return[{type:a.TranslateService}]};var Ee=function(){function e(e){this.translate=e}return e.prototype.init=function(e){var t=this;this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerm=e.searchTerm;var i=this.buildTemplateHtmlString();this.$filterElm=this.createDomElement(i),this.$filterElm.change(function(e){e&&e.target&&e.target.value?t.$filterElm.addClass("filled"):t.$filterElm.removeClass("filled"),t.callback(e,{columnDef:t.columnDef,operator:"EQ"})})},e.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&(this.$filterElm.val(""),e&&this.$filterElm.trigger("change"))},e.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("change").remove()},e.prototype.setValues=function(e){e&&this.$filterElm.val(e)},e.prototype.buildTemplateHtmlString=function(){var e=this;if(!this.columnDef||!this.columnDef.filter||!this.columnDef.filter.collection&&!this.columnDef.filter.selectOptions)throw new Error("[Angular-SlickGrid] You need to pass a \"collection\" for the Select Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: type: FilterType.select, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");!this.columnDef.filter.collection&&this.columnDef.filter.selectOptions&&console.warn('[Angular-SlickGrid] The Select Filter "selectOptions" property will de deprecated in future version. Please use the new "collection" property which is more generic and can be used with other Filters (not just Select).');var t=this.columnDef.filter.collection||this.columnDef.filter.selectOptions||[],i=this.columnDef.filter.customStructure?this.columnDef.filter.customStructure.label:"label",r=this.columnDef.filter.customStructure?this.columnDef.filter.customStructure.value:"value",n="";return t.forEach(function(t){if(!t||t[i]===undefined&&t.labelKey===undefined)throw new Error("A collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: type: FilterType.select, collection: [ { value: '1', label: 'One' } ]')");var o=t.labelKey||t[i],s=(t.labelKey||e.columnDef.filter.enableTranslateLabel)&&e.translate&&"function"==typeof e.translate.instant?e.translate.instant(o||" "):o;n+='<option value="'+t[r]+'">'+s+"</option>"}),'<select class="form-control search-filter">'+n+"</select>"},e.prototype.createDomElement=function(e){var t=this.grid.getHeaderRowColumn(this.columnDef.id);$(t).empty();var i=$(e),r="boolean"==typeof this.searchTerm?""+this.searchTerm:this.searchTerm;return i.val(r),i.attr("id","filter-"+this.columnDef.id),i.data("columnId",this.columnDef.id),i&&"function"==typeof i.appendTo&&i.appendTo(t),i},e}(),Ie=function(){function e(e){this.translate=e,this.defaultOptions={container:"body",filter:!1,maxHeight:200,single:!0}}return e.prototype.init=function(e){var t=this;this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerm=e.searchTerm;var i=this.buildTemplateHtmlString();this.createDomElement(i),this.$filterElm.change(function(e){e&&e.target&&e.target.value?t.$filterElm.addClass("filled").siblings("div .search-filter").addClass("filled"):t.$filterElm.removeClass("filled").siblings("div .search-filter").removeClass("filled"),t.callback(e,{columnDef:t.columnDef,operator:"EQ"})})},e.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&this.$filterElm.multipleSelect&&(this.$filterElm.multipleSelect("setSelects",[]),e&&this.callback(undefined,{columnDef:this.columnDef,operator:"IN",searchTerm:undefined}))},e.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off().remove()},e.prototype.setValues=function(e){e&&(e=Array.isArray(e)?e:[e],this.$filterElm.multipleSelect("setSelects",e))},e.prototype.buildTemplateHtmlString=function(){var e=this;if(!this.columnDef||!this.columnDef.filter||!this.columnDef.filter.collection)throw new Error("[Angular-SlickGrid] You need to pass a \"collection\" for the SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: type: FilterType.singleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");var t=this.columnDef.filter.collection||[],i=this.columnDef.filter.customStructure?this.columnDef.filter.customStructure.label:"label",r=this.columnDef.filter.customStructure?this.columnDef.filter.customStructure.value:"value",n="";return t.forEach(function(t){if(!t||t[i]===undefined&&t.labelKey===undefined)throw new Error("A collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: type: FilterType.singleSelect, collection: [ { value: '1', label: 'One' } ]')");var o=t.labelKey||t[i],s=t[r]===e.searchTerm?"selected":"",a=(t.labelKey||e.columnDef.filter.enableTranslateLabel)&&e.translate&&"function"==typeof e.translate.instant?e.translate.instant(o||" "):o;n+='<option value="'+t[r]+'" '+s+">"+a+"</option>"}),'<select class="ms-filter search-filter">'+n+"</select>"},e.prototype.createDomElement=function(e){var t=this.grid.getHeaderRowColumn(this.columnDef.id);if($(t).empty(),this.$filterElm=$(e),"function"!=typeof this.$filterElm.multipleSelect)throw new Error('multiple-select.js was not found, make sure to modify your "angular-cli.json" file and include "../node_modules/angular-slickgrid/lib/multiple-select/multiple-select.js" and it\'s css or SASS file');this.$filterElm.attr("id","filter-"+this.columnDef.id),this.$filterElm.data("columnId",this.columnDef.id),this.$filterElm&&"function"==typeof this.$filterElm.appendTo&&this.$filterElm.appendTo(t);var i=Object.assign({},this.defaultOptions,this.columnDef.filter.filterOptions);this.$filterElm=this.$filterElm.multipleSelect(i)},e}();Ie.decorators=[{type:s.Injectable}],Ie.ctorParameters=function(){return[{type:a.TranslateService}]};var Fe={input:Oe,inputNoPlaceholder:_e,multipleSelect:Pe,singleSelect:Ie,select:Ee},Ae=function(){function e(e){this.translate=e,this._eventHandler=new Slick.EventHandler,this._filters=[],this._columnFilters={},this._isFirstQuery=!0,this.onFilterChanged=new u.Subject}return e.prototype.init=function(e,t,i){this._grid=e,this._gridOptions=t},e.prototype.attachBackendOnFilter=function(e,t){var i=this;this._filters=[],this._subscriber=new Slick.Event;this._subscriber.subscribe(this.attachBackendOnFilterSubscribe.bind(this,this)),this._eventHandler.subscribe(e.onHeaderRowCellRendered,function(e,t){i.addFilterTemplateToHeaderRow(t)})},e.prototype.attachBackendOnFilterSubscribe=function(e,t,i){return F(this,void 0,void 0,function(){var e,r,n,o,s;return A(this,function(a){switch(a.label){case 0:if(!i||!i.grid)throw new Error('Something went wrong when trying to attach the "attachBackendOnFilterSubscribe(event, args)" function, it seems that "args" is not populated correctly');if(e=i.grid.getOptions()||{},!(r=e.backendServiceApi||e.onBackendEventApi)||!r.process||!r.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');return r.preProcess&&r.preProcess(),[4,r.service.onFilterChanged(t,i)];case 1:return n=a.sent(),o=r.process(n),[4,N(o)];case 2:return(s=a.sent())&&r.internalPostProcess&&r.internalPostProcess(s),r.postProcess!==undefined&&r.postProcess(s),[2]}})})},e.prototype.attachLocalOnFilter=function(e,t,i){var r=this;this._filters=[],this._dataView=i,this._subscriber=new Slick.Event,i.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid}),i.setFilter(this.customLocalFilter.bind(this,i)),this._subscriber.subscribe(function(e,t){null!=t.columnId&&i.refresh(),r.emitFilterChanged("local")}),this._eventHandler.subscribe(e.onHeaderRowCellRendered,function(e,t){r.addFilterTemplateToHeaderRow(t)})},e.prototype.clearFilters=function(){this._filters.forEach(function(e,t){e&&e.clear&&e.clear(!0)});for(var e in this._columnFilters)e&&this._columnFilters[e]&&delete this._columnFilters[e];this._dataView&&(this._dataView.refresh(),this._grid.invalidate(),this._grid.render())},e.prototype.customLocalFilter=function(e,t,i){try{for(var r=D(Object.keys(i.columnFilters)),n=r.next();!n.done;n=r.next()){var o=n.value,s=i.columnFilters[o],a=i.grid.getColumnIndex(o),l=i.grid.getColumns()[a];if(!l)return!1;var u=l.type||W.string,c=l.filterSearchType?l.filterSearchType:null,d=t[l.queryField||l.queryFieldFilter||l.field],p=s&&s.searchTerms?s.searchTerms:null,h=!s||s.searchTerm===undefined&&null===s.searchTerm?undefined:s.searchTerm;void 0===h&&(h="");var f=(h=""+h).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/),g=s.operator||(f?f[1]:""),m=f?f[2]:"",y=f?f[3]:"",v=l.filter&&l.filter.type?l.filter.type:X.input;if(!g&&v!==X.custom)switch(v){case X.select:case X.multipleSelect:g="IN";break;case X.singleSelect:g="EQ";break;default:g=g}if(""===m&&!p)return!0;if(p&&Array.isArray(p))for(var b=0,S=p.length;b<S;b++)p[b]=(p[b]===undefined||null===p[b]?"":p[b])+"";if(l&&l.params&&l.params.useFormatterOuputToFilter){var C=e&&"function"==typeof e.getIdxById?e.getIdxById(t.id):0;d=l.formatter(C,a,d,l,t,this._grid)}"number"==typeof d&&(d=d.toString());if(!ke.executeMappedCondition({fieldType:u,searchTerms:p,searchTerm:m,cellValue:d,operator:g,cellValueLastChar:y,filterSearchType:c}))return!1}}catch(k){w={error:k}}finally{try{n&&!n.done&&(T=r["return"])&&T.call(r)}finally{if(w)throw w.error}}return!0;var w,T},e.prototype.dispose=function(){this.disposeColumnFilters(),this._eventHandler.unsubscribeAll(),this._subscriber&&"function"==typeof this._subscriber.unsubscribe&&this._subscriber.unsubscribe()},e.prototype.disposeColumnFilters=function(){for(var e in this._columnFilters)e&&this._columnFilters[e]&&delete this._columnFilters[e];this._filters.forEach(function(e,t){e&&e.destroy&&e.destroy(!0)})},e.prototype.getColumnFilters=function(){return this._columnFilters},e.prototype.getCurrentLocalFilters=function(){var e=[];if(this._columnFilters)try{for(var t=D(Object.keys(this._columnFilters)),i=t.next();!i.done;i=t.next()){var r=i.value,n=this._columnFilters[r],o={columnId:r||""};n&&n.searchTerms?o.searchTerms=n.searchTerms:o.searchTerm=!n||n.searchTerm===undefined&&null===n.searchTerm?undefined:n.searchTerm,e.push(o)}}catch(l){s={error:l}}finally{try{i&&!i.done&&(a=t["return"])&&a.call(t)}finally{if(s)throw s.error}}return e;var s,a},e.prototype.callbackSearchEvent=function(e,t){var i=e&&e.target?e.target.value:undefined,r=t&&t.searchTerms&&Array.isArray(t.searchTerms)?t.searchTerms:[],n=t&&t.columnDef?t.columnDef.id||"":"";if(i||0!==r.length){var o=""+n;this._columnFilters[o]={columnId:o,columnDef:t.columnDef||null,operator:t.operator||undefined,searchTerms:t.searchTerms||undefined,searchTerm:e&&e.target?e.target.value:undefined}}else delete this._columnFilters[n];this.triggerEvent(this._subscriber,{columnId:n,columnDef:t.columnDef||null,columnFilters:this._columnFilters,searchTerms:t.searchTerms||undefined,searchTerm:e&&e.target?e.target.value:undefined,serviceOptions:this._onFilterChangedOptions,grid:this._grid},e)},e.prototype.addFilterTemplateToHeaderRow=function(e){var t=e.column,i=t.id||"";if(t&&"selector"!==i&&t.filterable){var r=void 0,n=void 0;this._columnFilters[t.id]?(n=this._columnFilters[t.id].searchTerm||undefined,r=this._columnFilters[t.id].searchTerms||undefined):t.filter&&(r=t.filter.searchTerms||undefined,n=t.filter.searchTerm||undefined,this.updateColumnFilters(n,r,t));var o={grid:this._grid,searchTerm:n,searchTerms:r,columnDef:t,callback:this.callbackSearchEvent.bind(this)},s=t.filter&&t.filter.type?t.filter.type:X.input;s||(s=this._gridOptions.defaultFilterType);var a;switch(s){case X.custom:t&&t.filter&&t.filter.customFilter&&(a=t.filter.customFilter);break;case X.select:a=new Fe.select(this.translate);break;case X.multipleSelect:a=new Fe.multipleSelect(this.translate);break;case X.singleSelect:a=new Fe.singleSelect(this.translate);break;case X.inputNoPlaceholder:a=new Fe.inputNoPlaceholder;break;case X.input:default:a=new Fe.input}if(a){a.init(o);var l=this._filters.findIndex(function(e){return a.columnDef.name===e.columnDef.name});-1===l?this._filters.push(a):this._filters[l]=a,(n||r)&&a.setValues&&a.setValues(n||r)}}},e.prototype.emitFilterChanged=function(e){if("remote"===e){var t=[],i=this._gridOptions.backendServiceApi.service;i&&i.getCurrentFilters&&(t=i.getCurrentFilters()),this.onFilterChanged.next(t)}else"local"===e&&this.onFilterChanged.next(this.getCurrentLocalFilters())},e.prototype.populateColumnFilterSearchTerms=function(e,t){if(e.presets&&e.presets.filters){var i=e.presets.filters;t.forEach(function(e){var t=i.find(function(t){return t.columnId===e.id});t&&t.searchTerm&&(e.filter=e.filter||{},e.filter.searchTerm=t.searchTerm),t&&t.searchTerms&&(e.filter=e.filter||{},e.filter.operator=e.filter.operator||te["in"],e.filter.searchTerms=t.searchTerms)})}return t},e.prototype.updateColumnFilters=function(e,t,i){e!==undefined&&null!==e&&""!==e&&(this._columnFilters[i.id]={columnId:i.id,columnDef:i,searchTerm:e,operator:i&&i.filter&&i.filter.operator?i.filter.operator:null,type:i&&i.filter&&i.filter.type?i.filter.type:X.input}),t&&(this._columnFilters[i.id]={columnId:i.id,columnDef:i,searchTerms:t,operator:i&&i.filter&&i.filter.operator?i.filter.operator:null,type:i&&i.filter&&i.filter.type?i.filter.type:X.input})},e.prototype.triggerEvent=function(e,t,i){return i=i||new Slick.EventData,e.notify(t,i,t.grid)},e}();Ae.decorators=[{type:s.Injectable}],Ae.ctorParameters=function(){return[{type:a.TranslateService}]};var De=function(){function e(e,t,i){this.exportService=e,this.filterService=t,this.translate=i}return e.prototype.attachDifferentControlOrPlugins=function(e,t,i,r){if(this._grid=e,this._gridOptions=i,this._dataView=r,this._columnDefinitions=t,this.visibleColumns=t,i.enableColumnPicker&&(this.columnPickerControl=this.createColumnPicker(e,t,i)),i.enableGridMenu&&(this.gridMenuControl=this.createGridMenu(e,t,i)),i.enableAutoTooltip&&(this.autoTooltipPlugin=new Slick.AutoTooltips(i.autoTooltipOptions||{}),e.registerPlugin(this.autoTooltipPlugin)),i.enableCheckboxSelector&&(e.registerPlugin(this.checkboxSelectorPlugin),this.rowSelectionPlugin||(this.rowSelectionPlugin=new Slick.RowSelectionModel(i.rowSelectionOptions||{}),e.setSelectionModel(this.rowSelectionPlugin))),i.enableRowSelection&&(this.rowSelectionPlugin=new Slick.RowSelectionModel(i.rowSelectionOptions||{}),e.setSelectionModel(this.rowSelectionPlugin)),i.enableHeaderButton&&(this.headerButtonsPlugin=new Slick.Plugins.HeaderButtons(i.headerButton||{}),e.registerPlugin(this.headerButtonsPlugin),this.headerButtonsPlugin.onCommand.subscribe(function(e,t){i.headerButton&&"function"==typeof i.headerButton.onCommand&&i.headerButton.onCommand(e,t)})),i.enableHeaderMenu){var n=i.headerMenu||{};n.minWidth=n.minWidth||140,n.autoAlignOffset=n.autoAlignOffset||12,this.headerMenuPlugin=new Slick.Plugins.HeaderMenu(n),e.registerPlugin(this.headerMenuPlugin),this.headerMenuPlugin.onCommand.subscribe(function(e,t){i.headerMenu&&"function"==typeof i.headerMenu.onCommand&&i.headerMenu.onCommand(e,t)}),this.headerMenuPlugin.onCommand.subscribe(function(e,t){i.headerMenu&&"function"==typeof i.headerMenu.onBeforeMenuShow&&i.headerMenu.onBeforeMenuShow(e,t)})}i.registerPlugins!==undefined&&(Array.isArray(i.registerPlugins)?i.registerPlugins.forEach(function(t){e.registerPlugin(t)}):e.registerPlugin(i.registerPlugins))},e.prototype.createColumnPicker=function(e,t,i){var r=i.enableTranslate?this.translate.instant("FORCE_FIT_COLUMNS"):"Force fit columns",n=i.enableTranslate?this.translate.instant("SYNCHRONOUS_RESIZE"):"Synchronous resize";i.columnPicker=i.columnPicker||{},i.columnPicker.forceFitTitle=i.columnPicker.forceFitTitle||r,i.columnPicker.syncResizeTitle=i.columnPicker.syncResizeTitle||n,this.columnPickerControl=new Slick.Controls.ColumnPicker(t,e,i),e&&i.enableColumnPicker&&this.columnPickerControl.onColumnsChanged.subscribe(function(e,t){i.columnPicker&&"function"==typeof i.columnPicker.onColumnsChanged&&i.columnPicker.onColumnsChanged(e,t)})},e.prototype.createGridMenu=function(e,t,i){i.gridMenu=Object.assign({},this.getDefaultGridMenuOptions(),i.gridMenu),this.addGridMenuCustomCommands(e,i);var r=new Slick.Controls.GridMenu(t,e,i);return e&&i.gridMenu&&(r.onBeforeMenuShow.subscribe(function(e,t){i.gridMenu&&"function"==typeof i.gridMenu.onBeforeMenuShow&&i.gridMenu.onBeforeMenuShow(e,t)}),r.onColumnsChanged.subscribe(function(e,t){i.gridMenu&&"function"==typeof i.gridMenu.onColumnsChanged&&i.gridMenu.onColumnsChanged(e,t)}),r.onCommand.subscribe(function(e,t){i.gridMenu&&"function"==typeof i.gridMenu.onCommand&&i.gridMenu.onCommand(e,t)}),r.onMenuClose.subscribe(function(t,r){if(i.gridMenu&&"function"==typeof i.gridMenu.onMenuClose&&i.gridMenu.onMenuClose(t,r),e&&"function"==typeof e.autosizeColumns){var n=e.getUID();n&&$("."+n).length>0&&e.autosizeColumns()}})),r},e.prototype.hideColumn=function(e){if(this._grid&&this.visibleColumns){var t=this._grid.getColumnIndex(e.id);this.visibleColumns=this.removeColumnByIndex(this.visibleColumns,t),this._grid.setColumns(this.visibleColumns)}},e.prototype.removeColumnByIndex=function(e,t){return e.filter(function(e,i){return t!==i})},e.prototype.autoResizeColumns=function(){this._grid.autosizeColumns()},e.prototype.dispose=function(){this._grid=null,this._dataView=null,this.visibleColumns=[],this.columnPickerControl&&(this.columnPickerControl.destroy(),this.columnPickerControl=null),this.gridMenuControl&&(this.gridMenuControl.destroy(),this.gridMenuControl=null),this.rowSelectionPlugin&&(this.rowSelectionPlugin.destroy(),this.rowSelectionPlugin=null),this.checkboxSelectorPlugin&&(this.checkboxSelectorPlugin.destroy(),this.checkboxSelectorPlugin=null),this.autoTooltipPlugin&&(this.autoTooltipPlugin.destroy(),this.autoTooltipPlugin=null),this.headerButtonsPlugin&&(this.headerButtonsPlugin.destroy(),this.headerButtonsPlugin=null),this.headerMenuPlugin&&(this.headerMenuPlugin.destroy(),this.headerMenuPlugin=null)},e.prototype.addGridMenuCustomCommands=function(e,t){var i=this,r=t.backendServiceApi||t.onBackendEventApi||null;if(t.enableFiltering&&(t&&t.gridMenu&&t.gridMenu.showClearAllFiltersCommand&&t.gridMenu.customItems&&0===t.gridMenu.customItems.filter(function(e){return"clear-filter"===e.command}).length&&t.gridMenu.customItems.push({iconCssClass:"fa fa-filter text-danger",title:t.enableTranslate?this.translate.instant("CLEAR_ALL_FILTERS"):"Clear All Filters",disabled:!1,command:"clear-filter",positionOrder:50}),t&&t.gridMenu&&t.gridMenu.showToggleFilterCommand&&t.gridMenu.customItems&&0===t.gridMenu.customItems.filter(function(e){return"toggle-filter"===e.command}).length&&t.gridMenu.customItems.push({iconCssClass:"fa fa-random",title:t.enableTranslate?this.translate.instant("TOGGLE_FILTER_ROW"):"Toggle Filter Row",disabled:!1,command:"toggle-filter",positionOrder:51}),t&&t.gridMenu&&t.gridMenu.showRefreshDatasetCommand&&r&&t.gridMenu.customItems&&0===t.gridMenu.customItems.filter(function(e){return"refresh-dataset"===e.command}).length&&t.gridMenu.customItems.push({iconCssClass:"fa fa-refresh",title:t.enableTranslate?this.translate.instant("REFRESH_DATASET"):"Refresh Dataset",disabled:!1,command:"refresh-dataset",positionOrder:54})),t&&t.enableExport&&t.gridMenu&&t.gridMenu.showExportCsvCommand&&t.gridMenu.customItems&&0===t.gridMenu.customItems.filter(function(e){return"export-csv"===e.command}).length&&t.gridMenu.customItems.push({iconCssClass:"fa fa-download",title:t.enableTranslate?this.translate.instant("EXPORT_TO_CSV"):"Export in CSV format",disabled:!1,command:"export-csv",positionOrder:52}),t&&t.enableExport&&t.gridMenu&&t.gridMenu.showExportTextDelimitedCommand&&t.gridMenu.customItems&&0===t.gridMenu.customItems.filter(function(e){return"export-text-delimited"===e.command}).length&&t.gridMenu.customItems.push({iconCssClass:"fa fa-download",title:t.enableTranslate?this.translate.instant("EXPORT_TO_TAB_DELIMITED"):"Export in Text format (Tab delimited)",disabled:!1,command:"export-text-delimited",positionOrder:53}),t.gridMenu&&t.gridMenu.customItems.length>0&&(t.gridMenu.onCommand=function(r,n){if(n&&n.command)switch(n.command){case"clear-filter":i.filterService.clearFilters(),i._dataView.refresh();break;case"export-csv":i.exportService.exportToFile({delimiter:Q.comma,filename:"export",format:K.csv,useUtf8WithBom:!0});break;case"export-text-delimited":i.exportService.exportToFile({delimiter:Q.tab,filename:"export",format:K.txt,useUtf8WithBom:!0});break;case"toggle-filter":e.setHeaderRowVisibility(!e.getOptions().showHeaderRow);break;case"toggle-toppanel":e.setTopPanelVisibility(!e.getOptions().showTopPanel);break;case"clear-filter":i.filterService.clearFilters(),i._dataView.refresh();break;case"refresh-dataset":i.refreshBackendDataset(t);break;default:alert("Command: "+n.command)}}),t&&t.gridMenu&&t.gridMenu.customItems&&t.gridMenu.customItems.length>0){var n=t.enableTranslate?this.translate.instant("COMMANDS"):"Commands";t.gridMenu.customTitle=t.gridMenu.customTitle||n,t.gridMenu.customItems.sort(function(e,t){return e&&t&&e.hasOwnProperty("positionOrder")&&t.hasOwnProperty("positionOrder")?e.positionOrder-t.positionOrder:0})}},e.prototype.getDefaultGridMenuOptions=function(){return{columnTitle:this.translate.instant("COLUMNS")||"Columns",forceFitTitle:this.translate.instant("FORCE_FIT_COLUMNS")||"Force fit columns",syncResizeTitle:this.translate.instant("SYNCHRONOUS_RESIZE")||"Synchronous resize",iconCssClass:"fa fa-bars",menuWidth:18,customTitle:undefined,customItems:[],showClearAllFiltersCommand:!0,showRefreshDatasetCommand:!0,showToggleFilterCommand:!0}},e.prototype.refreshBackendDataset=function(e){var t,i=e.backendServiceApi||e.onBackendEventApi;if(!i||!i.service||!i.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(i.service&&(t=i.service.buildQuery()),t&&""!==t){i.preProcess&&i.preProcess();N(i.process(t)).then(function(e){e&&i.internalPostProcess&&i.internalPostProcess(e),i.postProcess&&i.postProcess(e)})}},e.prototype.resetGridMenuTranslations=function(e){return e.customItems=[],delete e.customTitle,e.columnTitle=this.translate.instant("COLUMNS")||"Columns",e.forceFitTitle=this.translate.instant("FORCE_FIT_COLUMNS")||"Force fit columns",e.syncResizeTitle=this.translate.instant("SYNCHRONOUS_RESIZE")||"Synchronous resize",e},e.prototype.translateColumnPicker=function(){this.columnPickerControl&&(this.columnPickerControl.destroy(),this.columnPickerControl=null),this._gridOptions.columnPicker=undefined,this.createColumnPicker(this._grid,this.visibleColumns,this._gridOptions)},e.prototype.translateGridMenu=function(){this.gridMenuControl.destroy(),this._gridOptions&&this._gridOptions.gridMenu&&(this._gridOptions.gridMenu=this.resetGridMenuTranslations(this._gridOptions.gridMenu)),this.createGridMenu(this._grid,this.visibleColumns,this._gridOptions)},e.prototype.translateHeaders=function(e){e&&this.translate.use(e);try{for(var t=D(this._columnDefinitions),i=t.next();!i.done;i=t.next()){var r=i.value;r.headerKey&&(r.name=this.translate.instant(r.headerKey))}}catch(s){n={error:s}}finally{try{i&&!i.done&&(o=t["return"])&&o.call(t)}finally{if(n)throw n.error}}this._grid.setColumns(this._columnDefinitions);var n,o},e.prototype.createPluginBeforeGridCreation=function(e,t){if(t.enableCheckboxSelector){this.checkboxSelectorPlugin=new Slick.CheckboxSelectColumn(t.checkboxSelector||{});var i=this.checkboxSelectorPlugin.getColumnDefinition();i.excludeFromExport=!0,i.excludeFromQuery=!0,e.unshift(i)}},e}();De.decorators=[{type:s.Injectable}],De.ctorParameters=function(){return[{type:ne},{type:Ae},{type:a.TranslateService}]};var xe,$e=function(){function e(e,t){if(this.queryFnName=e,this.head=[],"function"==typeof t)this.alias=t;else if("object"==typeof t)this.filter(t);else{if(undefined===t&&2===arguments.length)throw new TypeError('You have passed undefined as Second argument to "Query"');if(undefined!==t)throw new TypeError('Second argument to "Query" should be an alias name(String) or filter arguments(Object). was passed '+t)}}return e.prototype.filter=function(e){try{for(var t=D(Object.keys(e)),i=t.next();!i.done;i=t.next()){var r=i.value;if("function"!=typeof e[r]){var n=this.getGraphQLValue(e[r]);"{}"!==n&&this.head.push(r+":"+n)}}}catch(a){o={error:a}}finally{try{i&&!i.done&&(s=t["return"])&&s.call(t)}finally{if(o)throw o.error}}return this;var o,s},e.prototype.find=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!e)throw new TypeError("find value can not be >>falsy<<");var i=1===e.length&&Array.isArray(e[0])?e[0]:e;return this.body=this.parceFind(i),this},e.prototype.setAlias=function(e){this.alias=e},e.prototype.toString=function(){if(this.body===undefined)throw new ReferenceError("return properties are not defined. use the 'find' function to defined them");return(this.alias?this.alias+":":"")+" "+this.queryFnName+" "+(this.head.length>0?"("+this.head.join(",")+")":"")+"  { "+this.body+" }"},e.prototype.parceFind=function(t){return t.map(function(i,r){var n=t[r];if(n instanceof e)return n.toString();if(Array.isArray(n)||"object"!=typeof n){if("string"==typeof n)return n;throw new RangeError("cannot handle Find value of "+n)}var o=Object.keys(n);if(1!==o.length)throw new RangeError("Alias objects should only have one value. was passed: "+JSON.stringify(n));var s=o[0],a=n[s];return Array.isArray(a)?new e(s).find(a):s+" : "+a+" "}).join(",")},e.prototype.getGraphQLValue=function(e){var t=this;return"string"==typeof e?e=JSON.stringify(e):Array.isArray(e)?e="["+(e=e.map(function(e){return t.getGraphQLValue(e)}).join())+"]":e instanceof Date?e=JSON.stringify(e):null!==e&&"object"==typeof e&&(e=this.objectToString(e)),e},e.prototype.objectToString=function(e){var t=[];try{for(var i=D(Object.keys(e)),r=i.next();!r.done;r=i.next()){var n=r.value;"function"!=typeof e[n]&&t.push(n+":"+this.getGraphQLValue(e[n]))}}catch(a){o={error:a}}finally{try{r&&!r.done&&(s=i["return"])&&s.call(i)}finally{if(o)throw o.error}}return"{"+t.join()+"}";var o,s},e}(),Me=25,Ve=function(){function e(e){this.translate=e,this.defaultOrderBy={field:"id",direction:ie.ASC},this.defaultPaginationOptions={first:Me,offset:0}}return e.prototype.buildQuery=function(){if(!this.options||!this.options.datasetName||!this._columnDefinitions&&!this.options.columnDefinitions)throw new Error('GraphQL Service requires "datasetName" & "columnDefinitions" properties for it to work');var e=this._columnDefinitions||this.options.columnDefinitions;e=e.filter(function(e){return!e.excludeFromQuery});var t=new $e("query"),i=new $e(this.options.datasetName),r=new $e("pageInfo"),n=new $e(this.options.isWithCursor?"edges":"nodes"),o=[];if(e&&Array.isArray(e))try{for(var s=D(e),a=s.next();!a.done;a=s.next()){var l=a.value;o.push(l.field),l.fields&&o.push.apply(o,M(l.fields))}}catch(h){d={error:h}}finally{try{a&&!a.done&&(p=s["return"])&&p.call(s)}finally{if(d)throw d.error}}else o=this.options.columnIds||[];-1===o.indexOf("id")&&o.unshift("id");var u=this.buildFilterQuery(o);this.options.isWithCursor?(r.find("hasNextPage","endCursor"),n.find(["cursor",{node:u}])):(r.find("hasNextPage"),n.find(u)),i.find(["totalCount",r,n]);var c=Object.assign({},this.options.paginationOptions,{first:(this.options.paginationOptions&&this.options.paginationOptions.first?this.options.paginationOptions.first:this.pagination&&this.pagination.pageSize?this.pagination.pageSize:null)||this.defaultPaginationOptions.first});this.options.isWithCursor||(c.offset=this.options.paginationOptions&&this.options.paginationOptions.hasOwnProperty("offset")?+this.options.paginationOptions.offset:0),this.options.sortingOptions&&Array.isArray(this.options.sortingOptions)&&this.options.sortingOptions.length>0&&(c.orderBy=this.options.sortingOptions),this.options.filteringOptions&&Array.isArray(this.options.filteringOptions)&&this.options.filteringOptions.length>0&&(c.filterBy=this.options.filteringOptions),this.options.addLocaleIntoQuery&&(c.locale=this.translate.currentLang||"en"),i.filter(c),t.find(i);return this.trimDoubleQuotesOnEnumField(t.toString(),["direction:","field:","operator:"],this.options.keepArgumentFieldDoubleQuotes||!1);var d,p},e.prototype.buildFilterQuery=function(e){var t=function(e,i){void 0===e&&(e={});var r=i.shift();return e[r]=i.length?t(e[r],i):null,e},i=e.reduce(function(e,i){return t(e,i.split("."))},{});return JSON.stringify(i).replace(/\"|\:|null/g,"").replace(/^\{/,"").replace(/\}$/,"")},e.prototype.init=function(e,t,i){this._grid=i,this.options=e||{},this.pagination=t,i&&i.getColumns&&i.getOptions&&(this._columnDefinitions=i.getColumns(),this._gridOptions=i.getOptions())},e.prototype.getInitPaginationOptions=function(){return this.options.isWithCursor?{first:this.pagination?this.pagination.pageSize:Me}:{first:this.pagination?this.pagination.pageSize:Me,offset:0}},e.prototype.getDatasetName=function(){return this.options.datasetName||""},e.prototype.getCurrentFilters=function(){return this._currentFilters},e.prototype.getCurrentPagination=function(){return this._currentPagination},e.prototype.getCurrentSorters=function(){return this._currentSorters},e.prototype.resetPaginationOptions=function(){var e;this.options.isWithCursor?e={after:"",before:undefined,last:undefined}:(e=this.options.paginationOptions||this.getInitPaginationOptions()).offset=0,this.updateOptions({paginationOptions:e})},e.prototype.updateOptions=function(e){this.options=Object.assign({},this.options,e)},e.prototype.onFilterChanged=function(e,t){var i=this,r=this._gridOptions||t.grid.getOptions(),n=r.backendServiceApi||r.onBackendEventApi;if(n===undefined)throw new Error('Something went wrong in the GraphqlService, "backendServiceApi" is not initialized');var o=0;!e||"keyup"!==e.type&&"keydown"!==e.type||(o=n.filterTypingDebounce||750);return new Promise(function(e,r){if(!t||!t.grid)throw new Error('Something went wrong when trying create the GraphQL Backend Service, it seems that "args" is not populated correctly');clearTimeout(xe),xe=setTimeout(function(){i.updateFilters(t.columnFilters,!1),i.resetPaginationOptions(),e(i.buildQuery())},o)})},e.prototype.onPaginationChanged=function(e,t){var i=+t.pageSize||(this.pagination?this.pagination.pageSize:20);return this.updatePagination(t.newPage,i),this.buildQuery()},e.prototype.onSortChanged=function(e,t){var i=t.multiColumnSort?t.sortCols:new Array({sortCol:t.sortCol,sortAsc:t.sortAsc});return this.updateSorters(i),this.buildQuery()},e.prototype.updateFilters=function(e,t){this._currentFilters=this.castFilterToColumnFilter(e);var i,r=[],n=function(n){if(e.hasOwnProperty(n)){var s=e[n],a=void 0;if(!(a=t&&Array.isArray(o._columnDefinitions)?o._columnDefinitions.find(function(e){return e.id===s.columnId}):s.columnDef))throw new Error("[Backend Service API]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?");var l=a.queryField||a.queryFieldFilter||a.field||a.name||"",u=(s?s.searchTerms:null)||[],c=s.searchTerm;if(void 0===c&&(c=""),"string"!=typeof c&&!u)throw new Error('GraphQL filter searchTerm property must be provided as type "string", if you use filter with options then make sure your IDs are also string. For example: filter: {type: FilterType.select, collection: [{ id: "0", value: "0" }, { id: "1", value: "1" }]');var d=(c=""+c).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/),p=s.operator||(d?d[1]:"");i=d?d[2]:"";var h=d?d[3]:"";if(l&&""===i&&0===u.length)return"continue";u&&u.length>0?i=u.join(","):"string"==typeof i&&(i=i.replace("'","''"),"*"!==p&&"*"!==h||(p="*"===p?"endsWith":"startsWith")),!p&&a.filter&&(p=H(a.filter.type||"")),p||(p=L(a.type||W.string)),r.push({field:l,operator:U(p),value:i})}},o=this;for(var s in e)n(s);this.updateOptions({filteringOptions:r})},e.prototype.updatePagination=function(e,t){this._currentPagination={pageNumber:e,pageSize:t};var i;i=this.options.isWithCursor?{first:t}:{first:t,offset:(e-1)*t},this.updateOptions({paginationOptions:i})},e.prototype.updateSorters=function(e,t){var i=[],r=[];if(!e&&t){(i=t).forEach(function(e){return e.direction=e.direction.toUpperCase()});var n=i.map(function(e){return{columnId:e.columnId,sortAsc:e.direction.toUpperCase()===ie.ASC}});this._grid.setSortColumns(n)}else if(e&&!t)if(e&&0===e.length)r=new Array(this.defaultOrderBy),i=new Array({columnId:this.defaultOrderBy.direction,direction:this.defaultOrderBy.direction});else if(e)try{for(var o=D(e),s=o.next();!s.done;s=o.next()){var a=s.value;a&&a.sortCol&&(i.push({columnId:(a.sortCol.queryField||a.sortCol.queryFieldSorter||a.sortCol.field||a.sortCol.id)+"",direction:a.sortAsc?ie.ASC:ie.DESC}),r.push({field:(a.sortCol.queryField||a.sortCol.queryFieldSorter||a.sortCol.field||a.sortCol.id)+"",direction:a.sortAsc?ie.ASC:ie.DESC}))}}catch(c){l={error:c}}finally{try{s&&!s.done&&(u=o["return"])&&u.call(o)}finally{if(l)throw l.error}}this._currentSorters=i,this.updateOptions({sortingOptions:r});var l,u},e.prototype.trimDoubleQuotesOnEnumField=function(e,t,i){var r=t.join('s?((field:s*)?".*?")|');r+='s?((field:s*)?".*?")';var n=new RegExp(r,"g");return e.replace(n,function(e,t,r){var n=!0;e.startsWith("field:")&&i&&(n=!1);return n?e.replace(/"/g,""):e})},e.prototype.castFilterToColumnFilter=function(e){return("object"==typeof e?Object.keys(e).map(function(t){return e[t]}):e).map(function(e){var t={columnId:e.columnId||""};return e.operator&&(t.operator=e.operator),Array.isArray(e.searchTerms)?t.searchTerms=e.searchTerms:t.searchTerm=e.searchTerm,t})},e}();Ve.decorators=[{type:s.Injectable}],Ve.ctorParameters=function(){return[{type:a.TranslateService}]},String.format=function(e,t){return e.replace(/{(\d+)}/g,function(e,i){return"undefined"!=typeof t[i]?t[i]:e})},String.padZero=function(e){for(var t=this;t.length<e;)t="0"+t;return t},String.trim=function(e){return e?e.replace(/\s+/g," "):e},String.allTitleCase=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},String.titleCase=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};var Re,Ne=function(){function e(){this._odataOptions={filterQueue:[],orderBy:""},this._defaultSortBy="",this._columnFilters={}}return e.prototype.buildQuery=function(){this._odataOptions.filterQueue=[];var e=[];if(this._odataOptions.top&&e.push("$top="+this._odataOptions.top),this._odataOptions.skip&&e.push("$skip="+this._odataOptions.skip),this._odataOptions.orderBy){var t="";t=Array.isArray(this._odataOptions.orderBy)?this._odataOptions.orderBy.join(","):this._odataOptions.orderBy,e.push("$orderby="+t)}if(this._odataOptions.filterBy||this._odataOptions.filter){if(this._odataOptions.filter){this._odataOptions.filterQueue=[];var i=this._odataOptions.filter;Array.isArray(this._odataOptions.filter)&&(i=this._odataOptions.filter.join(" "+(this._odataOptions.filterBySeparator||"and")+" ")),this._odataOptions.filterQueue.push("("+i+")")}this._odataOptions.filterBy&&this._odataOptions.filterBy.fieldName&&!this._columnFilters[this._odataOptions.filterBy.fieldName.toLowerCase()]&&""!==this._odataOptions.filterBy.searchTerm&&(this.saveColumnFilter(this._odataOptions.filterBy.fieldName.toLowerCase(),this._odataOptions.filterBy.searchTerm,this._odataOptions.filterBy.searchTerms),this.updateFilterFromListTerms(this._odataOptions.filterBy))}if(this._odataOptions.filterQueue.length>0){var r=this._odataOptions.filterQueue.join(" "+(this._odataOptions.filterBySeparator||"and")+" ");this._odataOptions.filter=r,e.push("$filter="+r)}return e.join("&")},e.prototype.getFilterByColumn=function(e){return this._columnFilters[e]?this._columnFilters[e]:null},e.prototype.getFilterCount=function(){return this._odataOptions.filterQueue?this._odataOptions.filterQueue.length:0},Object.defineProperty(e.prototype,"columnFilters",{get:function(){return this._columnFilters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._odataOptions},set:function(e){this._odataOptions=e},enumerable:!0,configurable:!0}),e.prototype.removeColumnFilter=function(e){delete this._columnFilters[e]},e.prototype.saveColumnFilter=function(e,t,i){this._columnFilters[e]={search:i,value:t}},e.prototype.updateFilterFromListTerms=function(e){var t=this;Array.isArray(e)?e.forEach(function(e){t.updateFilterFromTerm(e)}):this.updateFilterFromTerm(e)},e.prototype.updateFilterFromTerm=function(e){var t="",i=[],r=e.fieldName,n=e.searchTerms,o=e.operator;if(n&&n.length>0){var s=[];if("IN"===o){for(var a=0,l=n.length;a<l;a++)s.push(r+" eq '"+n[a]+"'");t="$("+(t=s.join(" or "))+")"}else if("NIN"===o||"NOTIN"===o||"NOT IN"===o){for(var u=0,c=n.length;u<c;u++)s.push(r+" ne '"+n[u]+"'");t="$("+(t=s.join(" and "))+")"}}i.push(String.trim(t));var d=i.length>0?i.join(" and "):"";this._odataOptions.filterQueue&&-1===this._odataOptions.filterQueue.indexOf(d)&&this._odataOptions.filterQueue.push(d)},e.prototype.updateOptions=function(e){try{for(var t=D(Object.keys(e)),i=t.next();!i.done;i=t.next()){var r=i.value;if(e.hasOwnProperty(r)&&(this._odataOptions[r]=e[r]),"orderBy"===r||"sortBy"===r){var n=e[r];this._odataOptions.caseType===Y.pascalCase&&(Array.isArray(n)?n.forEach(function(e,t,i){i[t]=String.titleCase(e)}):n=String.titleCase(e[r])),this._odataOptions.orderBy=n,this._defaultSortBy=n}}}catch(a){o={error:a}}finally{try{i&&!i.done&&(s=t["return"])&&s.call(t)}finally{if(o)throw o.error}}var o,s},e}(),Be=25,Ge=function(){function e(e){this.odataService=e,this.defaultOptions={top:Be,orderBy:"",caseType:Y.pascalCase}}return e.prototype.buildQuery=function(){return this.odataService.buildQuery()},e.prototype.init=function(e,t,i){this._grid=i;var r=Object.assign({},this.defaultOptions,e);this.odataService.options=Object.assign({},r,{top:r.top||(t?t.pageSize:null)||this.defaultOptions.top}),this.options=this.odataService.options,this.pagination=t,i&&i.getColumns&&i.getOptions&&(this._columnDefinitions=i.getColumns()||e.columnDefinitions,this._columnDefinitions=this._columnDefinitions.filter(function(e){return!e.excludeFromQuery}),this._gridOptions=i.getOptions())},e.prototype.updateOptions=function(e){this.options=Object.assign({},this.options,e)},e.prototype.removeColumnFilter=function(e){this.odataService.removeColumnFilter(e)},e.prototype.getCurrentFilters=function(){return this._currentFilters},e.prototype.getCurrentPagination=function(){return this._currentPagination},e.prototype.getCurrentSorters=function(){return this._currentSorters},e.prototype.resetPaginationOptions=function(){this.odataService.updateOptions({skip:0})},e.prototype.saveColumnFilter=function(e,t,i){this.odataService.saveColumnFilter(e,t,i)},e.prototype.onFilterChanged=function(e,t){var i=this,r=t.grid.getOptions(),n=r.backendServiceApi||r.onBackendEventApi;if(n===undefined)throw new Error('Something went wrong in the GridOdataService, "backendServiceApi" is not initialized');var o=0;!e||"keyup"!==e.type&&"keydown"!==e.type||(o=n.filterTypingDebounce||750);return new Promise(function(e,r){clearTimeout(Re),Re=setTimeout(function(){i.updateFilters(t.columnFilters),i.resetPaginationOptions(),e(i.odataService.buildQuery())},o)})},e.prototype.onPaginationChanged=function(e,t){var i=+t.pageSize||20;return this.updatePagination(t.newPage,i),this.odataService.buildQuery()},e.prototype.onSortChanged=function(e,t){var i=t.multiColumnSort?t.sortCols:new Array({sortCol:t.sortCol,sortAsc:t.sortAsc});return this.updateSorters(i),this.odataService.buildQuery()},e.prototype.updateFilters=function(e,t){this._currentFilters=this.castFilterToColumnFilter(e);var i="",r=[],n=function(n){if(e.hasOwnProperty(n)){var s=e[n],a=void 0;if(!(a=t&&Array.isArray(o._columnDefinitions)?o._columnDefinitions.find(function(e){return e.id===s.columnId}):s.columnDef))throw new Error("[Backend Service API]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?");var l=a.queryField||a.queryFieldFilter||a.field||a.name||"",u=a.type||"string",c=(s?s.searchTerms:null)||[],d=s.searchTerm;if(void 0===d&&(d=""),"string"!=typeof d&&!c)throw new Error('ODdata filter searchTerm property must be provided as type "string", if you use filter with options then make sure your IDs are also string. For example: filter: {type: FilterType.select, collection: [{ id: "0", value: "0" }, { id: "1", value: "1" }]');var p=(d=""+d).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/),h=s.operator||(p?p[1]:""),f=p?p[2]:"",g=p?p[3]:"",m=s.bypassBackendQuery||!1;if(l&&""===f)return o.removeColumnFilter(l),"continue";if(f=f.replace("'","''"),f=encodeURIComponent(f),m)l&&o.saveColumnFilter(l,d,c);else{if(i="",o.odataService.options.caseType===Y.pascalCase&&(l=String.titleCase(l||"")),c&&c.length>0){var y=[];if("IN"===h){for(var v=0,b=c.length;v<b;v++)y.push(l+" eq '"+c[v]+"'");i="("+(i=y.join(" or "))+")"}else if("NIN"===h||"NOTIN"===h||"NOT IN"===h){for(var S=0,C=c.length;S<C;S++)y.push(l+" ne '"+c[S]+"'");i="("+(i=y.join(" and "))+")"}}else if("*"===h||""!==g)i="*"===h?"endswith("+l+", '"+f+"')":"startswith("+l+", '"+f+"')";else if(u===W.date){var w=z(f,!0);w&&(i=l+" "+o.mapOdataOperator(h)+" DateTime'"+w+"'")}else u===W.string?i=""===h?"substringof('"+f+"', "+l+")":l+" "+o.mapOdataOperator(h)+" '"+f+"'":(f=u===W.number?f:"'"+f+"'",i=l+" "+o.mapOdataOperator(h)+" "+f);""!==i&&(r.push(String.trim(i)),o.saveColumnFilter(l||"",d,c))}}},o=this;for(var s in e)n(s);this.odataService.updateOptions({filter:r.length>0?r.join(" and "):"",skip:undefined})},e.prototype.updatePagination=function(e,t){this._currentPagination={pageNumber:e,pageSize:t},this.odataService.updateOptions({top:t,skip:(e-1)*t})},e.prototype.updateSorters=function(e,t){var i=[],r=[];if(!e&&t){(i=t).forEach(function(e){return e.direction=e.direction.toLowerCase()});var n=i.map(function(e){return{columnId:e.columnId,sortAsc:e.direction.toUpperCase()===ie.ASC}});this._grid.setSortColumns(n)}else if(e&&!t)if(e&&0===e.length)i=new Array(this.defaultOptions.orderBy);else if(e){try{for(var o=D(e),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.sortCol){var l=(a.sortCol.queryField||a.sortCol.queryFieldSorter||a.sortCol.field||a.sortCol.id)+"";this.odataService.options.caseType===Y.pascalCase&&(l=String.titleCase(l)),r.push({columnId:l,direction:a.sortAsc?"asc":"desc"})}}}catch(p){c={error:p}}finally{try{s&&!s.done&&(d=o["return"])&&d.call(o)}finally{if(c)throw c.error}}i=r}var u=(i=i).map(function(e){return e.columnId+" "+e.direction.toLowerCase()}).join(",");return this.odataService.updateOptions({orderBy:this.odataService.options.caseType===Y.pascalCase?String.titleCase(u):u}),this._currentSorters=i,this.odataService.buildQuery();var c,d},e.prototype.castFilterToColumnFilter=function(e){return("object"==typeof e?Object.keys(e).map(function(t){return e[t]}):e).map(function(e){var t={columnId:e.columnId||""};return e.operator&&(t.operator=e.operator),Array.isArray(e.searchTerms)?t.searchTerms=e.searchTerms:t.searchTerm=e.searchTerm,t})},e.prototype.mapOdataOperator=function(e){var t="";switch(e){case"<":t="lt";break;case"<=":t="le";break;case">":t="gt";break;case">=":t="ge";break;case"<>":case"!=":t="ne";break;case"=":case"==":default:t="eq"}return t},e}();Ge.decorators=[{type:s.Injectable}],Ge.ctorParameters=function(){return[{type:Ne}]};var Ue,Le=function(){function e(){this._eventHandler=new Slick.EventHandler}return e.prototype.attachOnCellChange=function(e,t,i){this._eventHandler.subscribe(e.onCellChange,function(r,n){if(r&&n&&n.grid&&n.cell!==undefined&&n.grid.getColumns&&n.grid.getDataItem){var o=n.grid.getColumns()[n.cell];if("function"==typeof o.onCellChange){var s={row:n.row,cell:n.cell,dataView:i,gridDefinition:t,grid:e,columnDef:o,dataContext:n.grid.getDataItem(n.row)};o.onCellChange(s)}}})},e.prototype.attachOnClick=function(e,t,i){this._eventHandler.subscribe(e.onClick,function(r,n){if(r&&n&&n.grid&&n.cell!==undefined&&n.grid.getColumns&&n.grid.getDataItem){var o=n.grid.getColumns()[n.cell];if("function"==typeof o.onCellClick){var s={row:n.row,cell:n.cell,dataView:i,gridDefinition:t,grid:e,columnDef:o,dataContext:n.grid.getDataItem(n.row)};o.onCellClick(s),r.stopImmediatePropagation()}e.getOptions&&e.getOptions().autoEdit}})},e.prototype.dispose=function(){this._eventHandler.unsubscribeAll()},e}(),He=function(){function e(){}return e.prototype.init=function(e,t,i,r){this._grid=e,this._gridOptions=i,this._dataView=r},e.prototype.getDataItemByRowNumber=function(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error("We could not find SlickGrid Grid object");return this._grid.getDataItem(e)},e.prototype.getItemRowMetadata=function(e){var t=this;return function(i){var r=t._dataView.getItem(i),n={cssClasses:""};return"object"!=typeof e||$.isEmptyObject(e)||(n=e(i)),r&&r._dirty&&(n.cssClasses=(n.cssClasses||"")+" dirty"),r&&r.rowClass&&(n.cssClasses+=" "+r.rowClass,n.cssClasses+=" row"+i),n}},e.prototype.highlightRow=function(e,t){var i=this;if(void 0===t&&(t=1500),!this._grid.getSelectionModel()){var r=new Slick.RowSelectionModel(this._gridOptions.rowSelectionOptions||{});this._grid.setSelectionModel(r)}this._grid.setSelectedRows([e]),this._dataView.getItemMetadata=this.getItemRowMetadata(this._dataView.getItemMetadata);var n=this._dataView.getItem(e);if(n&&n.id){n.rowClass="highlight",this._dataView.updateItem(n.id,n);var o=this._grid.getOptions();$("#"+o.gridId).find(".highlight.row"+e).first(),setTimeout(function(){if(n&&n.id){delete n.rowClass;i._dataView.getIdxById(n.id)!==undefined&&i._dataView.updateItem(n.id,n)}},t+10)}},e.prototype.getSelectedRows=function(){return this._grid.getSelectedRows()},e.prototype.setSelectedRow=function(e){this._grid.setSelectedRows([e])},e.prototype.setSelectedRows=function(e){this._grid.setSelectedRows(e)},e.prototype.renderGrid=function(){this._grid&&"function"==typeof this._grid.invalidate&&(this._grid.invalidate(),this._grid.render())},e.prototype.addItemToDatagrid=function(e){if(!this._grid||!this._gridOptions||!this._dataView)throw new Error("We could not find SlickGrid Grid, DataView objects");if(!this._gridOptions||!this._gridOptions.enableCheckboxSelector&&!this._gridOptions.enableRowSelection)throw new Error("addItemToDatagrid() requires to have a valid Slickgrid Selection Model. You can overcome this issue by enabling enableCheckboxSelector or enableRowSelection to True");this._dataView.insertItem(0,e),this._grid.scrollRowIntoView(0),this.highlightRow(0,1500),this._dataView.refresh()},e.prototype.updateDataGridItem=function(e){var t=this._dataView.getRowById(e.id),i=e&&e.hasOwnProperty("id")?e.id:-1;if(-1===i)throw new Error('Could not find the item in the item in the grid or it\'s associated "id"');this._dataView.getIdxById(i)!==undefined&&(this._dataView.updateItem(i,e),this.highlightRow(t,1500),this._dataView.refresh())},e}(),ze=function(){function e(){}return e.getColumnDefinitionAndData=function(e){if(!(e&&e.grid&&e.grid.getColumns&&e.grid.getDataItem))throw new Error("To get the column definition and data, we need to have these arguments passed (row, cell, grid)");return{columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row)}},e}(),je=function(){function e(){this.onGridStateChanged=new u.Subject}return e.prototype.init=function(e,t,i){var r=this;this._grid=e,this.filterService=t,this.sortService=i,this._gridOptions=e&&e.getOptions?e.getOptions():{},this._filterSubcription=this.filterService.onFilterChanged.subscribe(function(e){r.onGridStateChanged.next({change:{newValues:e,type:J.filter},gridState:r.getCurrentGridState()})}),this._sorterSubcription=this.sortService.onSortChanged.subscribe(function(e){r.onGridStateChanged.next({change:{newValues:e,type:J.sorter},gridState:r.getCurrentGridState()})})},e.prototype.dispose=function(){this._filterSubcription.unsubscribe(),this._sorterSubcription.unsubscribe()},e.prototype.getCurrentGridState=function(){var e={filters:this.getCurrentFilters(),sorters:this.getCurrentSorters()},t=this.getCurrentPagination();return t&&(e.pagination=t),e},e.prototype.getCurrentFilters=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentFilters)return e.getCurrentFilters()}else if(this.filterService&&this.filterService.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null},e.prototype.getCurrentPagination=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentPagination)return e.getCurrentPagination()}return null},e.prototype.getCurrentSorters=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentSorters)return e.getCurrentSorters()}else if(this.sortService&&this.sortService.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null},e}(),qe=function(){function e(){}return e.prototype.init=function(e,t){this._grid=e,this._gridOptions=t},e.prototype.attachAutoResizeDataGrid=function(){var e=this,t=$("#"+(this._gridOptions&&this._gridOptions.gridId?this._gridOptions.gridId:"grid1"));if(t===undefined||t.offset()===undefined)return null;this.resizeGrid(),$(window).on("resize.grid",function(){e.resizeGrid(),e.resizeGrid()})},e.prototype.calculateGridNewDimensions=function(e){var t=$("#"+e.gridId),i=e.autoResize&&e.autoResize.containerId?$("#"+e.autoResize.containerId):$("#"+e.gridContainerId),r=$(window);if(r===undefined||i===undefined||t===undefined)return null;var n=e.autoResize&&e.autoResize.bottomPadding?e.autoResize.bottomPadding:20;n&&(e.enablePagination||this._gridOptions.backendServiceApi)&&(n+=35);var o=r.height()||0,s=t.offset(),a=o-(s!==undefined?s.top:0)-n,l=i.width()||0,u=e.autoResize&&e.autoResize.minHeight<0?e.autoResize.minHeight:180,c=e.autoResize&&e.autoResize.minWidth<0?e.autoResize.minWidth:300,d=a,p=e.autoResize&&e.autoResize.sidePadding?l-e.autoResize.sidePadding:l;return d<u&&(d=u),p<c&&(p=c),{height:d,width:p}},e.prototype.dispose=function(){$(window).off("resize.grid")},e.prototype.resizeGrid=function(e,t){var i=this;if(!this._grid||!this._gridOptions)throw new Error('\n      Angular-Slickgrid resizer requires a valid Grid object and Grid Options defined.\n      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling attachAutoResizeDataGrid()');e=e||0,clearTimeout(Ue),Ue=setTimeout(function(){t=t||i.calculateGridNewDimensions(i._gridOptions);var e=$("#"+i._gridOptions.gridId)||{},r=$("#"+i._gridOptions.gridContainerId)||{};t&&e.length>0&&(e.height(t.height),e.width(t.width),r.height(t.height),r.width(t.width),null===new RegExp("MSIE [6-8]").exec(navigator.userAgent)&&i._grid&&i._grid.resizeCanvas(),i._grid.autosizeColumns())},e)},e}(),Ye=o,Qe=B(W.dateUsShort),We=function(e,t,i){if(!Ye(e,Qe,!0).isValid()||!Ye(t,Qe,!0).isValid())return 0;var r=Ye(e,Qe,!0),n=Ye(t,Qe,!0),o=parseInt(r.format("X"),10)-parseInt(n.format("X"),10);return i*(0===o?0:o>0?1:-1)},Ke=o,Xe=function(e,t,i){if(!Ke(e,Ke.ISO_8601).isValid()||!Ke(t,Ke.ISO_8601,!0).isValid())return 0;var r=Ke(e),n=Ke(t),o=parseInt(r.format("X"),10)-parseInt(n.format("X"),10);return i*(0===o?0:o>0?1:-1)},Ze=o,Je=B(W.dateIso),et=function(e,t,i){if(!Ze(e,Je,!0).isValid()||!Ze(t,Je,!0).isValid())return 0;var r=Ze(e,Je,!0),n=Ze(t,Je,!0),o=parseInt(r.format("X"),10)-parseInt(n.format("X"),10);return i*(0===o?0:o>0?1:-1)},tt=o,it=B(W.dateUs),rt=function(e,t,i){if(!tt(e,it,!0).isValid()||!tt(t,it,!0).isValid())return 0;var r=tt(e,it,!0),n=tt(t,it,!0),o=parseInt(r.format("X"),10)-parseInt(n.format("X"),10);return i*(0===o?0:o>0?1:-1)},nt=function(e,t,i){var r=isNaN(e)||""===e||null===e?-99e10:parseFloat(e),n=isNaN(t)||""===t||null===t?-99e10:parseFloat(t);return i*(r===n?0:r>n?1:-1)},ot=function(e,t,i){var r;return null===e?r=-1:null===t?r=1:e===t?r=0:i?r=e<t?-1:1:i||(r=e<t?1:-1),i*r},st={date:Xe,dateIso:et,dateUs:rt,dateUsShort:We,numeric:nt,string:ot},at=function(){function e(){this._currentLocalSorters=[],this._eventHandler=new Slick.EventHandler,this.onSortChanged=new u.Subject}return e.prototype.attachBackendOnSort=function(e,t){this._grid=e,this._gridOptions=t,this._subscriber=e.onSort;this._subscriber.subscribe(this.attachBackendOnSortSubscribe.bind(this,this))},e.prototype.attachBackendOnSortSubscribe=function(e,t,i){return F(this,void 0,void 0,function(){var r,n,o,s,a;return A(this,function(l){switch(l.label){case 0:if(!i||!i.grid)throw new Error('Something went wrong when trying to attach the "attachBackendOnSortSubscribe(event, args)" function, it seems that "args" is not populated correctly');if(r=i.grid.getOptions()||{},!(n=r.backendServiceApi||r.onBackendEventApi)||!n.process||!n.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');return n.preProcess&&n.preProcess(),o=n.service.onSortChanged(t,i),e.emitSortChanged("remote"),s=n.process(o),[4,N(s)];case 1:return(a=l.sent())&&n.internalPostProcess&&n.internalPostProcess(a),n.postProcess&&n.postProcess(a),[2]}})})},e.prototype.attachLocalOnSort=function(e,t,i,r){var n=this;this._grid=e,this._gridOptions=t,this._subscriber=e.onSort,this._subscriber.subscribe(function(r,o){var s=o.multiColumnSort?o.sortCols:new Array({sortAsc:o.sortAsc,sortCol:o.sortCol});n._currentLocalSorters=[],Array.isArray(s)&&s.forEach(function(e){e.sortCol&&n._currentLocalSorters.push({columnId:e.sortCol.id,direction:e.sortAsc?ie.ASC:ie.DESC})}),n.onLocalSortChanged(e,t,i,s),n.emitSortChanged("local")}),this._eventHandler.subscribe(i.onRowCountChanged,function(o,s){s.current>0&&n.loadLocalPresets(e,t,i,r)})},e.prototype.getCurrentLocalSorters=function(){return this._currentLocalSorters},e.prototype.loadLocalPresets=function(e,t,i,r){var n=this,o=[];if(this._currentLocalSorters=[],t&&t.presets&&t.presets.sorters){var s=t.presets.sorters;r.forEach(function(e){var t=s.find(function(t){return t.columnId===e.id});t&&(o.push({columnId:e.id,sortAsc:t.direction.toUpperCase()===ie.ASC,sortCol:e}),n._currentLocalSorters.push({columnId:e.id+"",direction:t.direction.toUpperCase()}))}),o.length>0&&(this.onLocalSortChanged(e,t,i,o),e.setSortColumns(o))}},e.prototype.onLocalSortChanged=function(e,t,i,r){i.sort(function(e,t){for(var i=0,n=r.length;i<n;i++){var o=r[i];if(o&&o.sortCol){var s=o.sortAsc?1:-1,a=o.sortCol.queryField||o.sortCol.queryFieldFilter||o.sortCol.field,l=o.sortCol.type||"string",u=e[a],c=t[a],d=0;switch(l){case W.number:d=st.numeric(u,c,s);break;case W.date:d=st.date(u,c,s);break;case W.dateIso:d=st.dateIso(u,c,s);break;case W.dateUs:d=st.dateUs(u,c,s);break;case W.dateUsShort:d=st.dateUsShort(u,c,s);break;default:d=st.string(u,c,s)}if(0!==d)return d}}return 0}),e.invalidate(),e.render()},e.prototype.dispose=function(){this._subscriber&&"function"==typeof this._subscriber.unsubscribe&&this._subscriber.unsubscribe(),this._eventHandler.unsubscribeAll()},e.prototype.emitSortChanged=function(e){if("remote"===e){var t=[],i=this._gridOptions.backendServiceApi.service;i&&i.getCurrentSorters&&(t=i.getCurrentSorters()),this.onSortChanged.next(t)}else"local"===e&&this.onSortChanged.next(this.getCurrentLocalSorters())},e}(),lt=function(){function e(e){this.args=e,this.init()}return e.prototype.init=function(){this.$input=$('<input type="checkbox" value="true" class="editor-checkbox" />'),this.$input.appendTo(this.args.container),this.$input.focus()},e.prototype.destroy=function(){this.$input.remove()},e.prototype.focus=function(){this.$input.focus()},e.prototype.hide=function(){this.$input.hide()},e.prototype.show=function(){this.$input.show()},e.prototype.loadValue=function(e){this.defaultValue=!!e[this.args.column.field],this.defaultValue?this.$input.prop("checked",!0):this.$input.prop("checked",!1)},e.prototype.preClick=function(){this.$input.prop("checked",!this.$input.prop("checked"))},e.prototype.serializeValue=function(){return this.$input.prop("checked")},e.prototype.applyValue=function(e,t){e[this.args.column.field]=t},e.prototype.isValueChanged=function(){return this.serializeValue()!==this.defaultValue},e.prototype.validate=function(){return{valid:!0,msg:null}},e}();require("flatpickr");var ut=function(){function e(e){this.args=e,this.init()}return e.prototype.init=function(){var e=this,t=this.args.grid.getOptions();this.defaultDate=this.args.item[this.args.column.field]||null;var i=G(this.args.column.type||W.dateIso),r=G(this.args.column.outputType||W.dateUtc),n=this.getCurrentLocale(this.args.column,t),o={defaultDate:this.defaultDate,altInput:!0,altFormat:i,dateFormat:r,closeOnSelect:!1,locale:"en"!==n?this.loadFlatpickrLocale(n):"en",onChange:function(t,i,r){e.save()}};this.$input=$('<input type="text" data-defaultDate="'+this.defaultDate+'" class="editor-text flatpickr" />'),this.$input.appendTo(this.args.container),this.flatInstance=this.$input[0]&&"function"==typeof this.$input[0].flatpickr?this.$input[0].flatpickr(o):null,this.show()},e.prototype.getCurrentLocale=function(e,t){var i=e.params||{};return i.i18n&&i.i18n instanceof a.TranslateService?i.i18n.currentLang:"en"},e.prototype.loadFlatpickrLocale=function(e){if("en"!==e){var t=require("flatpickr/dist/l10n/"+e+".js")["default"];return t&&t[e]?t[e]:"en"}return"en"},e.prototype.destroy=function(){this.hide(),this.$input.remove()},e.prototype.show=function(){this.flatInstance&&"function"==typeof this.flatInstance.open&&this.flatInstance.open()},e.prototype.hide=function(){this.flatInstance&&"function"==typeof this.flatInstance.close&&this.flatInstance.close()},e.prototype.focus=function(){this.$input.focus()},e.prototype.save=function(){this.args.commitChanges()},e.prototype.loadValue=function(e){this.defaultDate=e[this.args.column.field]},e.prototype.serializeValue=function(){return this.$input.val()},e.prototype.applyValue=function(e,t){e[this.args.column.field]=t},e.prototype.isValueChanged=function(){return!(""===this.$input.val()&&null==this.defaultDate)&&this.$input.val()!==this.defaultDate},e.prototype.validate=function(){if(this.args.column.validator){var e=this.args.column.validator(this.$input.val(),this.args);if(!e.valid)return e}return{valid:!0,msg:null}},e}(),ct=function(){function e(e){this.args=e,this.init()}return e.prototype.init=function(){this.$input=$("<input type=\"text\" class='editor-text' />").appendTo(this.args.container).on("keydown.nav",function(e){e.keyCode!==ee.LEFT&&e.keyCode!==ee.RIGHT||e.stopImmediatePropagation()}).focus().select()},e.prototype.destroy=function(){this.$input.remove()},e.prototype.focus=function(){this.$input.focus()},e.prototype.getDecimalPlaces=function(){var e=this.args.column.editorFixedDecimalPlaces;return e===undefined&&(e=0),e||0===e?e:null},e.prototype.loadValue=function(e){this.defaultValue=e[this.args.column.field];var t=this.getDecimalPlaces();null!==t&&(this.defaultValue||0===this.defaultValue)&&this.defaultValue.toFixed&&(this.defaultValue=this.defaultValue.toFixed(t)),this.$input.val(this.defaultValue),this.$input[0].defaultValue=this.defaultValue,this.$input.select()},e.prototype.serializeValue=function(){var e=parseFloat(this.$input.val())||0,t=this.getDecimalPlaces();return null!==t&&(e||0===e)&&e.toFixed&&(e=parseFloat(e.toFixed(t))),e},e.prototype.applyValue=function(e,t){e[this.args.column.field]=t},e.prototype.isValueChanged=function(){return!(""===this.$input.val()&&null===this.defaultValue)&&this.$input.val()!==this.defaultValue},e.prototype.validate=function(){if(isNaN(this.$input.val()))return{valid:!1,msg:"Please enter a valid number"};if(this.args.column.validator){var e=this.args.column.validator(this.$input.val());if(!e.valid)return e}return{valid:!0,msg:null}},e}(),dt=function(){function e(e){this.args=e,this.init()}return e.prototype.init=function(){this.$input=$("<input type=\"text\" class='editor-text' />").appendTo(this.args.container).on("keydown.nav",function(e){e.keyCode!==ee.LEFT&&e.keyCode!==ee.RIGHT||e.stopImmediatePropagation()}).focus().select()},e.prototype.destroy=function(){this.$input.remove()},e.prototype.focus=function(){this.$input.focus()},e.prototype.loadValue=function(e){this.defaultValue=e[this.args.column.field],this.$input.val(this.defaultValue),this.$input[0].defaultValue=this.defaultValue,this.$input.select()},e.prototype.serializeValue=function(){return parseInt(this.$input.val(),10)||0},e.prototype.applyValue=function(e,t){e[this.args.column.field]=t},e.prototype.isValueChanged=function(){return!(""===this.$input.val()&&null===this.defaultValue)&&this.$input.val()!==this.defaultValue},e.prototype.validate=function(){if(isNaN(this.$input.val()))return{valid:!1,msg:"Please enter a valid integer"};if(this.args.column.validator){var e=this.args.column.validator(this.$input.val());if(!e.valid)return e}return{valid:!0,msg:null}},e}(),pt=function(){function e(e){this.args=e,this.init()}return e.prototype.init=function(){var e=this,t=$("body");this.$wrapper=$('<div class="slick-large-editor-text" />').appendTo(t),this.$input=$('<textarea hidefocus rows="5">').appendTo(this.$wrapper),$('<div class="editor-footer">\n        <button class="btn btn-primary btn-xs">Save</button>\n        <button class="btn btn-default btn-xs">Cancel</button>\n      </div>').appendTo(this.$wrapper),this.$wrapper.find("button:first").on("click",function(t){return e.save()}),this.$wrapper.find("button:last").on("click",function(t){return e.cancel()}),this.$input.on("keydown",this.handleKeyDown),this.position(this.args.position),this.$input.focus().select()},e.prototype.handleKeyDown=function(e){e.which===ee.ENTER&&e.ctrlKey?this.save():e.which===ee.ESCAPE?(e.preventDefault(),this.cancel()):e.which===ee.TAB&&e.shiftKey?(e.preventDefault(),this.args.grid.navigatePrev()):e.which===ee.TAB&&(e.preventDefault(),this.args.grid.navigateNext())},e.prototype.save=function(){this.args.commitChanges()},e.prototype.cancel=function(){this.$input.val(this.defaultValue),this.args.cancelChanges()},e.prototype.hide=function(){this.$wrapper.hide()},e.prototype.show=function(){this.$wrapper.show()},e.prototype.position=function(e){this.$wrapper.css("top",(e.top||0)-5).css("left",(e.left||0)-5)},e.prototype.destroy=function(){this.$wrapper.remove()},e.prototype.focus=function(){this.$input.focus()},e.prototype.loadValue=function(e){this.$input.val(this.defaultValue=e[this.args.column.field]),this.$input.select()},e.prototype.serializeValue=function(){return this.$input.val()},e.prototype.applyValue=function(e,t){e[this.args.column.field]=t},e.prototype.isValueChanged=function(){return!(""===this.$input.val()&&null==this.defaultValue)&&this.$input.val()!==this.defaultValue},e.prototype.validate=function(){var e=!0,t=null;if(this.args.column.validator){var i=this.args.column.validator(this.$input.val(),this.args);e=i.valid,t=i.msg}return{valid:e,msg:t}},e}(),ht=function(){function e(e){this.args=e,this.init()}return e.prototype.init=function(){this.$input=$("<input type=\"text\" class='editor-text' />").appendTo(this.args.container).on("keydown.nav",function(e){e.keyCode!==ee.LEFT&&e.keyCode!==ee.RIGHT||e.stopImmediatePropagation()}).focus().select()},e.prototype.destroy=function(){this.$input.remove()},e.prototype.focus=function(){this.$input.focus()},e.prototype.getValue=function(){return this.$input.val()},e.prototype.setValue=function(e){this.$input.val(e)},e.prototype.loadValue=function(e){this.defaultValue=e[this.args.column.field]||"",this.$input.val(this.defaultValue),this.$input[0].defaultValue=this.defaultValue,this.$input.select()},e.prototype.serializeValue=function(){return this.$input.val()},e.prototype.applyValue=function(e,t){e[this.args.column.field]=t},e.prototype.isValueChanged=function(){return!(""===this.$input.val()&&null===this.defaultValue)&&this.$input.val()!==this.defaultValue},e.prototype.validate=function(){if(this.args.column.validator){var e=this.args.column.validator(this.$input.val());if(!e.valid)return e}return{valid:!0,msg:null}},e}(),ft={checkbox:lt,date:ut,"float":ct,integer:dt,longText:pt,text:ht},gt=function(e,t,i,r,n){return i&&Array.isArray(i)?i.join(", "):""},mt=function(e,t,i,r,n){return i?"&#x2611;":""},yt=function(e,t,i,r,n){return i?'<i class="fa fa-check checkmark-icon" aria-hidden="true"></i>':""},vt=function(e,t,i,r,n){if(!r)return"";return(r.field||"").split(".").reduce(function(e,t){return e[t]},n)},bt=o,St=B(W.dateIso),Ct=function(e,t,i,r,n){return i?bt(i).format(St):""},wt=o,Tt=B(W.dateTimeIsoAmPm),kt=function(e,t,i,r,n){return i?wt(i).format(Tt):""},Ot=o,_t=B(W.dateTimeUsAmPm),Pt=function(e,t,i,r,n){return i?Ot(i).format(_t):""},Et=o,It=B(W.dateTimeUs),Ft=function(e,t,i,r,n){return i?Et(i).format(It):""},At=o,Dt=B(W.dateUs),xt=function(e,t,i,r,n){return i?At(i).format(Dt):""},$t=function(e,t,i,r,n){return'<i class="fa fa-trash pointer delete-icon" aria-hidden="true"></i>'},Mt=function(e,t,i,r,n){return'<i class="fa fa-pencil pointer edit-icon" aria-hidden="true"></i>'},Vt=function(e,t,i,r,n){if(i&&"string"==typeof i){var o=i.match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/i);if(o&&Array.isArray(o))return'<a href="'+o[0]+"\">' + value + '</a>"}return""},Rt=function(e,t,i,r,n){var o=r&&r.params&&r.params.uriPrefix?r.params.uriPrefix:"";if(!o)throw new Error("HyperlinkUriPrefix Formatter require a \"uriPrefix\" that can be passed through params. e.g.:: formatter: Formatters.hyperlinkUriPrefix, params: { uriPrefix: '/users/' }");return i&&o&&"string"==typeof o&&!o.includes("<script>")?'<a href="'+(o+=i)+'">'+i+"</a>":""},Nt=function(e,t,i,r,n){return'<i class="fa fa-info-circle pointer info-icon" aria-hidden="true"></i>'},Bt=function(e,t,i,r,n){return i!==undefined&&"string"!=typeof i&&(i+=""),i?i.toLowerCase():""},Gt=function(e,t,i,r,n,o){var s=r.params||{};if(!s.formatters||!Array.isArray(s.formatters))throw new Error('The multiple formatter requires the "formatters" to be provided as a column params.\n    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }');var a=s.formatters,l=i;try{for(var u=D(a),c=u.next();!c.done;c=u.next()){l=(0,c.value)(e,t,l,r,n,o)}}catch(h){d={error:h}}finally{try{c&&!c.done&&(p=u["return"])&&p.call(u)}finally{if(d)throw d.error}}return l;var d,p},Ut=function(e,t,i,r,n){return null===i||""===i?"-":i<50?"<span style='color:red;font-weight:bold;'>"+i+"%</span>":"<span style='color:green'>"+i+"%</span>"},Lt=function(e,t,i,r,n){if(null===i||""===i)return"";return'<span class="percent-complete-bar" style="background:'+(i<30?"red":i<70?"silver":"green")+"; width:"+i+'%"></span>'},Ht=function(e,t,i,r,n){if(null===i||""===i)return"";return'<div class="progress">\n    <div class="progress-bar progress-bar-'+(i<30?"danger":i<70?"warning":"success")+'" role="progressbar" aria-valuenow="'+i+'" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: '+i+'%;">\n    '+i+"%\n    </div>\n  </div>"},zt=function(e,t,i,r,n,o){var s=o&&"function"==typeof o.getOptions?o.getOptions():{},l=r.params||{},u=s.params||{};if(!(l.i18n&&l.i18n instanceof a.TranslateService||u.i18n&&u.i18n instanceof a.TranslateService))throw new Error('The translate formatter requires the ngx-translate "TranslateService" to be provided as a Column Definition params or a Grid Option params.\n    For example: this.gridOptions = { enableTranslate: true, params: { i18n: this.translateService }}');var c=u.i18n||l.i18n;return i!==undefined&&"string"!=typeof i&&(i+=""),i?c.instant(i):""},jt=function(e,t,i,r,n,o){var s=o&&"function"==typeof o.getOptions?o.getOptions():{},l=r.params||{},u=s.params||{};if(!(l.i18n&&l.i18n instanceof a.TranslateService||u.i18n&&u.i18n instanceof a.TranslateService))throw new Error('The translate formatter requires the ngx-translate "TranslateService" to be provided as a Column Definition params or a Grid Option params.\n    For example: this.gridOptions = { enableTranslate: true, params: { i18n: this.translateService }}');var c=u.i18n||l.i18n;return i!==undefined&&"string"!=typeof i&&(i+=""),i?c.instant(i.toUpperCase()):""},qt=function(e,t,i,r,n){return i!==undefined&&"string"!=typeof i&&(i+=""),i?i.toUpperCase():""},Yt=function(e,t,i,r,n){return i?"Yes":"No"},Qt={arrayToCsv:gt,checkbox:mt,checkmark:yt,complexObject:vt,dateIso:Ct,dateTimeIso:Ct,dateTimeIsoAmPm:kt,dateUs:xt,dateTimeUs:Ft,dateTimeUsAmPm:Pt,deleteIcon:$t,editIcon:Mt,hyperlink:Vt,hyperlinkUriPrefix:Rt,infoIcon:Nt,lowercase:Bt,multiple:Gt,percentComplete:Ut,percentCompleteBar:Lt,progressBar:Ht,translate:zt,translateBoolean:jt,uppercase:qt,yesNo:Yt},Wt=function(){function e(e,t){this.filterService=e,this.sortService=t,this._isFirstRender=!0,this.onPaginationChanged=new s.EventEmitter,this.dataFrom=1,this.dataTo=1,this.pageCount=0,this.pageNumber=1,this.totalItems=0,this.paginationPageSizes=[25,75,100],this.fromToParams={from:this.dataFrom,to:this.dataTo,totalItems:this.totalItems}}return Object.defineProperty(e.prototype,"gridPaginationOptions",{get:function(){return this._gridPaginationOptions},set:function(e){this._gridPaginationOptions=e,!this._isFirstRender&&e&&e.pagination&&e.pagination.totalItems===this.totalItems||(this.refreshPagination(),this._isFirstRender=!1)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngAfterViewInit=function(){var e=this;this._gridPaginationOptions=this._gridPaginationOptions,this._gridPaginationOptions&&this._gridPaginationOptions.pagination&&this._gridPaginationOptions.pagination.totalItems===this.totalItems||this.refreshPagination(),this._filterSubcription=this.filterService.onFilterChanged.subscribe(function(t){e.refreshPagination(!0)}),this._sorterSubcription=this.sortService.onSortChanged.subscribe(function(t){e.refreshPagination(!0)})},e.prototype.ceil=function(e){return Math.ceil(e)},e.prototype.changeToFirstPage=function(e){this.pageNumber=1,this.onPageChanged(e,this.pageNumber)},e.prototype.changeToLastPage=function(e){this.pageNumber=this.pageCount,this.onPageChanged(e,this.pageNumber)},e.prototype.changeToNextPage=function(e){this.pageNumber<this.pageCount&&(this.pageNumber++,this.onPageChanged(e,this.pageNumber))},e.prototype.changeToPreviousPage=function(e){this.pageNumber>0&&(this.pageNumber--,this.onPageChanged(e,this.pageNumber))},e.prototype.changeToCurrentPage=function(e){this.pageNumber=e.currentTarget.value,this.pageNumber<1?this.pageNumber=1:this.pageNumber>this.pageCount&&(this.pageNumber=this.pageCount),this.onPageChanged(e,this.pageNumber)},e.prototype.dispose=function(){this.onPaginationChanged.unsubscribe(),this._filterSubcription&&this._filterSubcription.unsubscribe(),this._sorterSubcription&&this._sorterSubcription.unsubscribe()},e.prototype.onChangeItemPerPage=function(e){var t=+e.target.value;this.pageCount=Math.ceil(this.totalItems/t),this.pageNumber=1,this.itemsPerPage=t,this.onPageChanged(e,this.pageNumber)},e.prototype.refreshPagination=function(e){void 0===e&&(e=!1);var t=this._gridPaginationOptions.backendServiceApi||this._gridPaginationOptions.onBackendEventApi;if(!t||!t.service||!t.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(this._gridPaginationOptions&&this._gridPaginationOptions.pagination){var i=this._gridPaginationOptions.pagination;this.itemsPerPage||(this.itemsPerPage=+(t&&t.options&&t.options.paginationOptions&&t.options.paginationOptions.first?t.options.paginationOptions.first:this._gridPaginationOptions.pagination.pageSize)),(e||this.totalItems!==i.totalItems)&&(this._isFirstRender&&i.pageNumber&&i.pageNumber>1?this.pageNumber=i.pageNumber||1:this.pageNumber=1,t.service.resetPaginationOptions()),this.paginationPageSizes=this._gridPaginationOptions.pagination.pageSizes,this.totalItems=this._gridPaginationOptions.pagination.totalItems,this.recalculateFromToIndexes()}this.pageCount=Math.ceil(this.totalItems/this.itemsPerPage)},e.prototype.onPageChanged=function(e,t){return F(this,void 0,void 0,function(){var i,r,n,o,s;return A(this,function(a){switch(a.label){case 0:if(this.recalculateFromToIndexes(),!(i=this._gridPaginationOptions.backendServiceApi||this._gridPaginationOptions.onBackendEventApi)||!i.service||!i.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');return this.dataTo>this.totalItems?this.dataTo=this.totalItems:this.totalItems<this.itemsPerPage&&(this.dataTo=this.totalItems),i?(r=+this.itemsPerPage,i.preProcess&&i.preProcess(),n=i.service.onPaginationChanged(e,{newPage:t,pageSize:r}),o=i.process(n),[4,N(o)]):[3,2];case 1:return(s=a.sent())&&i.internalPostProcess&&i.internalPostProcess(s),i.postProcess&&i.postProcess(s),[3,3];case 2:throw new Error('Pagination with a backend service requires "BackendServiceApi" to be defined in your grid options');case 3:return this.onPaginationChanged.emit({pageNumber:this.pageNumber,pageSizes:this.paginationPageSizes,pageSize:this.itemsPerPage,totalItems:this.totalItems}),[2]}})})},e.prototype.recalculateFromToIndexes=function(){this.dataFrom=this.pageNumber*this.itemsPerPage-this.itemsPerPage+1,this.dataTo=this.totalItems<this.itemsPerPage?this.totalItems:this.pageNumber*this.itemsPerPage},e}();Wt.decorators=[{type:s.Component,args:[{selector:"slick-pagination",template:'<div class="slick-pagination">\n    <div class="slick-pagination-nav">\n        <nav aria-label="Page navigation">\n        <ul class="pagination">\n            <li class="page-item" [ngClass]="pageNumber === 1 ? \'disabled\' : \'\'">\n            <a class="page-link icon-seek-first fa fa-angle-double-left" aria-label="First" (click)="changeToFirstPage($event)">\n            </a>\n            </li>\n            <li class="page-item" [ngClass]="pageNumber === 1 ? \'disabled\' : \'\'">\n            <a class="page-link icon-seek-prev fa fa-angle-left" aria-label="Previous" (click)="changeToPreviousPage($event)">\n            </a>\n            </li>\n        </ul>\n        </nav>\n        <div class="slick-page-number">\n            <span [translate]="\'PAGE\'"></span>\n            <input type="text" class="form-control" value="{{pageNumber}}" size="1"  (change)="changeToCurrentPage($event)">\n            <span [translate]="\'OF\'"></span><span> {{pageCount}}</span>\n        </div>\n        <nav aria-label="Page navigation">\n        <ul class="pagination">\n            <li class="page-item" [ngClass]="pageNumber === pageCount ? \'disabled\' : \'\'">\n            <a class="page-link icon-seek-next text-center fa fa-lg fa-angle-right" aria-label="Next" (click)="changeToNextPage($event)">\n            </a>\n            </li>\n            <li class="page-item" [ngClass]="pageNumber === pageCount ? \'disabled\' : \'\'">\n            <a class="page-link icon-seek-end fa fa-lg fa-angle-double-right" aria-label="Last" (click)="changeToLastPage($event)">\n            </a>\n            </li>\n        </ul>\n        </nav>\n    </div>\n    <span class="slick-pagination-settings">\n        <select id="items-per-page-label" [value]="itemsPerPage" (change)="onChangeItemPerPage($event)">\n        <option value="{{pageSize}}" *ngFor="let pageSize of paginationPageSizes;">{{pageSize}}</option>\n        </select>\n        <span [translate]="\'ITEMS_PER_PAGE\'"></span>,\n        <span class="slick-pagination-count">\n            <span [translate]="\'FROM_TO_OF_TOTAL_ITEMS\'" [translateParams]="{ from: dataFrom, to: dataTo, totalItems: totalItems }"></span>\n        </span>\n    </span>\n    </div>\n'}]},{type:s.Injectable}],Wt.ctorParameters=function(){return[{type:Ae},{type:at}]},Wt.propDecorators={onPaginationChanged:[{type:s.Output}],gridPaginationOptions:[{type:s.Input}],grid:[{type:s.Input}]};var Kt={autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoResize:{bottomPadding:20,minHeight:180,minWidth:300,sidePadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel"},columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0},datasetIdPropertyName:"id",defaultFilterType:X.input,editable:!1,enableAutoResize:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableExport:!0,enableGridMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,exportWithFormatter:!1,forceFitColumns:!1,gridMenu:{hideForceFitButton:!1,hideSyncResizeButton:!0,iconCssClass:"fa fa-bars",menuWidth:16,resizeOnShowHeaderRow:!1,showClearAllFiltersCommand:!0,showExportCsvCommand:!0,showRefreshDatasetCommand:!0,showToggleFilterCommand:!0},headerRowHeight:35,multiColumnSort:!0,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},rowHeight:35,showHeaderRow:!1,topPanelHeight:35},Xt=function(){function e(){}return e.prototype.init=function(e,t,i,r){this.grid=e,this.dataView=t,this.gridOptions=i,this.columnDefinitions=r},e}(),Zt=function(){function e(e,t,i,r,n,o,a,l,u,c,d){this.controlAndPluginService=e,this.exportService=t,this.filterService=i,this.gridExtraService=r,this.gridEventService=n,this.gridStateService=o,this.resizer=a,this.sharedService=l,this.sortService=u,this.translate=c,this.forRootConfig=d,this._eventHandler=new Slick.EventHandler,this.groupingDefinition={},this.showPagination=!1,this.onDataviewCreated=new s.EventEmitter,this.onGridCreated=new s.EventEmitter,this.onGridInitialized=new s.EventEmitter,this.onBeforeGridCreate=new s.EventEmitter,this.onBeforeGridDestroy=new s.EventEmitter,this.onAfterGridDestroyed=new s.EventEmitter,this.gridHeight=100,this.gridWidth=600}return Object.defineProperty(e.prototype,"dataset",{get:function(){return this._dataView.getItems()},set:function(e){this._dataset=e,this.refreshGridData(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.onBeforeGridCreate.emit(!0),this.gridHeightString=this.gridHeight+"px",this.gridWidthString=this.gridWidth+"px"},e.prototype.ngOnDestroy=function(){this.onBeforeGridDestroy.emit(this.grid),this.destroy(),this.onAfterGridDestroyed.emit(!0)},e.prototype.destroy=function(){this._dataView=[],this.gridOptions={},this._eventHandler.unsubscribeAll(),this.controlAndPluginService.dispose(),this.filterService.dispose(),this.gridEventService.dispose(),this.gridStateService.dispose(),this.resizer.dispose(),this.sortService.dispose(),this.grid.destroy(),this._translateSubscription&&this._translateSubscription.unsubscribe()},e.prototype.ngAfterViewInit=function(){this._dataset=this._dataset||[],this.gridOptions=this.mergeGridOptions(this.gridOptions),this.createBackendApiInternalPostProcessCallback(this.gridOptions),this._dataView=new Slick.Data.DataView,this.controlAndPluginService.createPluginBeforeGridCreation(this.columnDefinitions,this.gridOptions),this.grid=new Slick.Grid("#"+this.gridId,this._dataView,this.columnDefinitions,this.gridOptions),this.controlAndPluginService.attachDifferentControlOrPlugins(this.grid,this.columnDefinitions,this.gridOptions,this._dataView),this.attachDifferentHooks(this.grid,this.gridOptions,this._dataView),this.onGridCreated.emit(this.grid),this.onDataviewCreated.emit(this._dataView),this.grid.init(),this._dataView.beginUpdate(),this._dataView.setItems(this._dataset,this.gridOptions.datasetIdPropertyName),this._dataView.endUpdate(),this.sharedService.init(this.grid,this._dataView,this.gridOptions,this.columnDefinitions),this.attachResizeHook(this.grid,this.gridOptions),this.gridExtraService.init(this.grid,this.columnDefinitions,this.gridOptions,this._dataView),this.gridOptions.enableTranslate&&this.controlAndPluginService.translateHeaders(),this.gridOptions.enableExport&&this.exportService.init(this.grid,this.gridOptions,this._dataView),this.onGridInitialized.emit(this.grid),this.gridOptions&&(this.gridOptions.backendServiceApi||this.gridOptions.onBackendEventApi)&&this.attachBackendCallbackFunctions(this.gridOptions),this.gridStateService.init(this.grid,this.filterService,this.sortService)},e.prototype.createBackendApiInternalPostProcessCallback=function(e){var t=this;if(e&&(e.backendServiceApi||e.onBackendEventApi)){var i=e.backendServiceApi||e.onBackendEventApi;i&&i.service&&i.service instanceof Ve&&(i.internalPostProcess=function(e){var r=i&&i.service&&"function"==typeof i.service.getDatasetName?i.service.getDatasetName():"";if(!e||!e.data||!e.data[r])throw new Error("Your GraphQL result is invalid and/or does not follow the required result structure. Please check the result and/or review structure to use in Angular-Slickgrid Wiki in the GraphQL section.");t._dataset=e.data[r].nodes,t.refreshGridData(t._dataset,e.data[r].totalCount)})}},e.prototype.attachDifferentHooks=function(e,t,i){var r=this;if(this._translateSubscription=this.translate.onLangChange.subscribe(function(e){t.enableTranslate&&(r.controlAndPluginService.translateHeaders(),r.controlAndPluginService.translateColumnPicker(),r.controlAndPluginService.translateGridMenu())}),t.enableSorting&&(t.backendServiceApi||t.onBackendEventApi?this.sortService.attachBackendOnSort(e,t):this.sortService.attachLocalOnSort(e,t,this._dataView,this.columnDefinitions)),t.enableFiltering&&(this.filterService.init(e,t,this.columnDefinitions),t.presets&&t.presets.filters&&this.filterService.populateColumnFilterSearchTerms(t,this.columnDefinitions),t.backendServiceApi||t.onBackendEventApi?this.filterService.attachBackendOnFilter(e,t):this.filterService.attachLocalOnFilter(e,t,this._dataView)),t.backendServiceApi||t.onBackendEventApi){var n=t.backendServiceApi||t.onBackendEventApi;t.onBackendEventApi&&console.warn('"onBackendEventApi" has been DEPRECATED, please consider using "backendServiceApi" in the short term since "onBackendEventApi" will be removed in future versions. You can take look at the Angular-Slickgrid Wikis for OData/GraphQL Services implementation'),n&&n.service&&n.service.init&&n.service.init(n.options,t.pagination,this.grid)}this.gridEventService.attachOnCellChange(e,this.gridOptions,i),this.gridEventService.attachOnClick(e,this.gridOptions,i),this._eventHandler.subscribe(i.onRowCountChanged,function(t,i){e.updateRowCount(),e.render()}),this._eventHandler.subscribe(i.onRowsChanged,function(t,i){e.invalidateRows(i.rows),e.render()})},e.prototype.attachBackendCallbackFunctions=function(e){var t=this,i=e.backendServiceApi||e.onBackendEventApi,r=i&&i.service&&i.service.options?i.service.options:{},n=!!r&&(!r||!r.hasOwnProperty("executeProcessCommandOnInit")||r.executeProcessCommandOnInit);if(i){var o=i.service;if(e&&e.presets)o&&o.updateFilters&&e.presets.filters&&o.updateFilters(e.presets.filters,!0),o&&o.updateSorters&&e.presets.sorters&&o.updateSorters(undefined,e.presets.sorters),o&&o.updatePagination&&e.presets.pagination&&o.updatePagination(e.presets.pagination.pageNumber,e.presets.pagination.pageSize);else{var s=this.filterService.getColumnFilters();s&&o&&o.updateFilters&&o.updateFilters(s,!1)}}if(i&&i.service&&(i.onInit||n)){var a="function"==typeof i.service.buildQuery?i.service.buildQuery():"",l=n?i.process(a):i.onInit(a);setTimeout(function(){return F(t,void 0,void 0,function(){var e;return A(this,function(t){switch(t.label){case 0:return i.preProcess&&i.preProcess(),[4,N(l)];case 1:return(e=t.sent())&&i&&i.service instanceof Ve&&i.internalPostProcess&&i.internalPostProcess(e),i.postProcess&&i.postProcess(e),[2]}})})})}},e.prototype.attachResizeHook=function(e,t){e&&t.autoFitColumnsOnFirstLoad&&e.autosizeColumns(),this.resizer.init(e,t),t.enableAutoResize?(this.resizer.attachAutoResizeDataGrid(),e&&t.autoFitColumnsOnFirstLoad&&e.autosizeColumns()):this.resizer.resizeGrid(0,{height:this.gridHeight,width:this.gridWidth})},e.prototype.mergeGridOptions=function(e){return e.gridId=this.gridId,e.gridContainerId="slickGridContainer-"+this.gridId,(e.enableFiltering||this.forRootConfig.enableFiltering)&&(e.showHeaderRow=!0),$.extend(!0,{},Kt,this.forRootConfig,e)},e.prototype.paginationChanged=function(e){this.gridStateService.onGridStateChanged.next({change:{newValues:e,type:J.pagination},gridState:this.gridStateService.getCurrentGridState()})},e.prototype.refreshGridData=function(e,t){e&&this.grid&&this._dataView&&"function"==typeof this._dataView.setItems&&(this._dataView.setItems(e,this.gridOptions.datasetIdPropertyName),this.grid.invalidate(),this.grid.render(),(this.gridOptions.enablePagination||this.gridOptions.backendServiceApi)&&(this.showPagination=!(!this.gridOptions.backendServiceApi||this.gridOptions.enablePagination!==undefined)||this.gridOptions.enablePagination||!1,this.gridOptions.pagination||(this.gridOptions.pagination=this.gridOptions.pagination?this.gridOptions.pagination:undefined),this.gridOptions.pagination&&t&&(this.gridOptions.pagination.totalItems=t),this.gridOptions.presets&&this.gridOptions.presets.pagination&&this.gridOptions.pagination&&(this.gridOptions.pagination.pageSize=this.gridOptions.presets.pagination.pageSize,this.gridOptions.pagination.pageNumber=this.gridOptions.presets.pagination.pageNumber),this.gridPaginationOptions=this.mergeGridOptions(this.gridOptions)),this.grid&&this.gridOptions.enableAutoResize&&this.resizer.resizeGrid(10))},e.prototype.showHeaderRow=function(e){return this.grid.setHeaderRowVisibility(e),e},e.prototype.toggleHeaderRow=function(){var e=!this.grid.getOptions().showHeaderRow;return this.grid.setHeaderRowVisibility(e),e},e}();Zt.decorators=[{type:s.Injectable},{type:s.Component,args:[{selector:"angular-slickgrid",template:'<div id="slickGridContainer-{{gridId}}" class="gridPane">\n    <div attr.id=\'{{gridId}}\' class="slickgrid-container" [style.height]="gridHeightString" [style.width]="gridWidthString">\n    </div>\n    <slick-pagination id="slickPagingContainer-{{gridId}}"\n        *ngIf="showPagination"\n        (onPaginationChanged)="paginationChanged($event)"\n        [gridPaginationOptions]="gridPaginationOptions">\n    </slick-pagination>\n</div>\n'}]}],Zt.ctorParameters=function(){return[{type:De},{type:ne},{type:Ae},{type:He},{type:Le},{type:je},{type:qe},{type:Xt},{type:at},{type:a.TranslateService},{type:undefined,decorators:[{type:s.Inject,args:["config"]}]}]},Zt.propDecorators={onDataviewCreated:[{type:s.Output}],onGridCreated:[{type:s.Output}],onGridInitialized:[{type:s.Output}],onBeforeGridCreate:[{type:s.Output}],onBeforeGridDestroy:[{type:s.Output}],onAfterGridDestroyed:[{type:s.Output}],gridId:[{type:s.Input}],columnDefinitions:[{type:s.Input}],gridOptions:[{type:s.Input}],gridHeight:[{type:s.Input}],gridWidth:[{type:s.Input}],dataset:[{type:s.Input}]};var Jt=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[{provide:"config",useValue:t},De,ne,Ae,Ve,Le,He,Ge,je,Ne,qe,Xt,at]}},e}();Jt.decorators=[{type:s.NgModule,args:[{imports:[I.CommonModule,a.TranslateModule],declarations:[Zt,Wt],exports:[Zt,Wt]}]}],Jt.ctorParameters=function(){return[]},e.SlickPaginationComponent=Wt,e.AngularSlickgridComponent=Zt,e.AngularSlickgridModule=Jt,e.CaseType=Y,e.DelimiterType=Q,e.FieldType=W,e.FileType=K,e.FilterType=X,e.FormElementType=Z,e.GridStateType=J,e.KeyCode=ee,e.OperatorType=te,e.SortDirection=ie,e.ControlAndPluginService=De,e.ExportService=ne,e.FilterService=Ae,e.GraphqlService=Ve,e.GridOdataService=Ge,e.GridEventService=Le,e.GridExtraService=He,e.GridExtraUtils=ze,e.GridStateService=je,e.OdataService=Ne,e.ResizerService=qe,e.SortService=at,e.addWhiteSpaces=V,e.htmlEntityDecode=R,e.htmlEntityEncode=function(e){for(var t=[],i=e.length-1;i>=0;i--)t.unshift(["&#",e[i].charCodeAt(),";"].join(""));return t.join("")},e.castToPromise=N,e.mapMomentDateFormatWithFieldType=B,e.mapFlatpickrDateFormatWithFieldType=G,e.mapOperatorType=U,e.mapOperatorByFieldType=L,e.mapOperatorByFilterType=H,e.parseUtcDate=z,e.toCamelCase=j,e.toKebabCase=function(e){return j(e).replace(/([A-Z])/g,"-$1").toLowerCase()},e.Editors=ft,e.FilterConditions=ke,e.Filters=Fe,e.Formatters=Qt,e.Sorters=st,e.a=lt,e.b=ut,e.c=ct,e.d=dt,e.e=pt,e.f=ht,e.h=oe,e.i=Se,e.j=le,e.k=de,e.m=fe,e.n=ye,e.l=be,e.g=Te,e.q=se,e.o=Ce,e.p=we,e.r=Oe,e.s=_e,e.t=Pe,e.v=Ee,e.u=Ie,e.w=gt,e.x=mt,e.y=yt,e.z=vt,e.ba=Ct,e.bb=kt,e.be=Pt,e.bd=Ft,e.bc=xt,e.bf=$t,e.bg=Mt,e.bh=Vt,e.bi=Rt,e.bj=Nt,e.bk=Bt,e.bl=Gt,e.bn=Lt,e.bm=Ut,e.bo=Ht,e.bq=jt,e.bp=zt,e.br=qt,e.bs=Yt,e.bz=Xt,e.bu=et,e.bt=Xe,e.bw=We,e.bv=rt,e.bx=nt,e.by=ot,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-slickgrid.umd.min.js.map
